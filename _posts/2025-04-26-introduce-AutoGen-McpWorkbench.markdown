---
layout: single  
title: "ğŸš€AutoGené‡å¤§æ›´æ–°ï¼æ–°å¢McpWorkbenchå®Œç¾æ”¯æŒMCP Serverï¼æ”¯æŒå°†Agentå’ŒTeamå°è£…ä¸ºå·¥å…·ï¼å¼€å¯æ¨¡å—åŒ–æ™ºèƒ½ä½“ç¼–ç¨‹ï¼å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æ„å»ºæ—…æ¸¸è§„åˆ’æ™ºèƒ½ä½“å’Œè¿›é”€å­˜æ™ºèƒ½å®¢æœç³»ç»Ÿ"  
sidebar:
  nav: "docs"
date: 2025-04-26 10:00:00 +0800  
categories: AIAgents  
tags: [MCP, MCP Server, AutoGen, McpWorkbench, AIAgents, AIæ™ºèƒ½ä½“]  
classes: wide  

author_profile: true  
---

åœ¨AutoGenæ¡†æ¶ä¸­ï¼Œ"Agent and Team as Tools"æ˜¯ä¸€é¡¹åˆ›æ–°åŠŸèƒ½ï¼Œå®ƒå…è®¸å°†ç°æœ‰çš„æ™ºèƒ½ä½“(Agent)å’Œå›¢é˜Ÿ(Team)ä½œä¸ºå·¥å…·ä¾›å…¶ä»–æ™ºèƒ½ä½“è°ƒç”¨ã€‚æ ¹æ®æˆ‘æœç´¢åˆ°çš„ä¿¡æ¯ï¼Œè¿™ä¸€åŠŸèƒ½å…·æœ‰æ˜¾è‘—çš„ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯ã€‚

### ğŸš€æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š

- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ é€šè¿‡å“”å“©å“”å“©è§‚çœ‹](https://www.bilibili.com/video/BV1BFLozCEHx/)
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ é€šè¿‡YouTubeè§‚çœ‹](https://youtu.be/1ZxzPpa5Ysc)
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ æˆ‘çš„å¼€æºé¡¹ç›®](https://github.com/win4r/AISuperDomain)
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ è¯·æˆ‘å–å’–å•¡](https://ko-fi.com/aila)
- ğŸ‘‰ğŸ‘‰ğŸ‘‰ æˆ‘çš„å¾®ä¿¡ï¼šstoeng
- ğŸ‘‰ğŸ‘‰ğŸ‘‰ æ‰¿æ¥å¤§æ¨¡å‹å¾®è°ƒã€RAGã€AIæ™ºèƒ½ä½“ã€AIç›¸å…³åº”ç”¨å¼€å‘ç­‰é¡¹ç›®ã€‚

### ğŸ”¥AIæ™ºèƒ½ä½“ç›¸å…³è§†é¢‘

1. [AIæ™ºèƒ½ä½“è§†é¢‘ 1](https://youtu.be/vYm0brFoMwA) 
2. [AIæ™ºèƒ½ä½“è§†é¢‘ 2](https://youtu.be/szTXELuaJos)  
3. [AIæ™ºèƒ½ä½“è§†é¢‘ 3](https://youtu.be/szTXELuaJos)  
4. [AIæ™ºèƒ½ä½“è§†é¢‘ 4](https://youtu.be/RxR3x_Uyq4c)  
5. [AIæ™ºèƒ½ä½“è§†é¢‘ 5](https://youtu.be/IrTEDPnEVvU)  


## åˆ›æ–°ä¼˜åŠ¿

### 1. æ¨¡å—åŒ–å’Œå¯é‡ç”¨æ€§

AutoGen v0.4é‡‡ç”¨äº†æ¨¡å—åŒ–å’Œå¯æ‰©å±•çš„è®¾è®¡ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡å¯æ’æ‹”ç»„ä»¶è½»æ¾å®šåˆ¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰æ™ºèƒ½ä½“ã€å·¥å…·ã€è®°å¿†å’Œæ¨¡å‹ã€‚ å½“æ™ºèƒ½ä½“æˆ–å›¢é˜Ÿè¢«ä½œä¸ºå·¥å…·ä½¿ç”¨æ—¶ï¼Œè¿™ç§æ¨¡å—åŒ–è®¾è®¡å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿï¼š

- æ„å»ºæ›´å¤æ‚çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œå…¶ä¸­ä¸“ä¸šåŒ–çš„æ™ºèƒ½ä½“å¯ä»¥ä½œä¸ºå·¥å…·è¢«å…¶ä»–æ™ºèƒ½ä½“è°ƒç”¨
- é‡ç”¨å·²ç»è®­ç»ƒå¥½çš„æ™ºèƒ½ä½“å’Œå›¢é˜Ÿï¼Œé¿å…é‡å¤å·¥ä½œ
- åˆ›å»ºå±‚æ¬¡åŒ–çš„æ™ºèƒ½ä½“ç»“æ„ï¼Œå®ç°åŠŸèƒ½çš„å°è£…å’ŒæŠ½è±¡

### 2. åŠŸèƒ½å°è£…å’Œä¸“ä¸šåŒ–

é€šè¿‡å°†Agentæˆ–Teamä½œä¸ºå·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥ï¼š

- å°†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡å°è£…ä¸ºå•ä¸ªå·¥å…·è°ƒç”¨
- åˆ›å»ºä¸“æ³¨äºç‰¹å®šé¢†åŸŸä»»åŠ¡çš„"ä¸“å®¶"æ™ºèƒ½ä½“ï¼Œä½œä¸ºå·¥å…·è¢«å…¶ä»–æ™ºèƒ½ä½“è°ƒç”¨
- éšè—å¤æ‚çš„å®ç°ç»†èŠ‚ï¼Œæä¾›ç®€å•æ˜ç¡®çš„æ¥å£

### 3. æ‰©å±•æ€§å’Œçµæ´»æ€§

AutoGençš„è®¾è®¡æ”¯æŒå¯æ‰©å±•å’Œåˆ†å¸ƒå¼çš„æ™ºèƒ½ä½“ç½‘ç»œï¼Œè¿™äº›ç½‘ç»œå¯ä»¥æ— ç¼åœ°è·¨ç»„ç»‡è¾¹ç•Œè¿è¡Œã€‚ "Agent and Team as Tools"åŠŸèƒ½å¢å¼ºäº†è¿™ç§æ‰©å±•æ€§ï¼š

- å…è®¸æ™ºèƒ½ä½“é€šè¿‡è°ƒç”¨å…¶ä»–æ™ºèƒ½ä½“ä½œä¸ºå·¥å…·æ¥è®¿é—®æ–°åŠŸèƒ½
- æ”¯æŒåŠ¨æ€å·¥ä½œæµç¨‹ï¼Œæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚åŠ¨æ€é€‰æ‹©å’Œè°ƒç”¨å…¶ä»–æ™ºèƒ½ä½“
- ä¿ƒè¿›äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ„å»ºï¼Œå…¶ä¸­ä¸åŒçš„æ™ºèƒ½ä½“å¯èƒ½è¿è¡Œåœ¨ä¸åŒçš„ç¯å¢ƒæˆ–æœåŠ¡å™¨ä¸Š

### 4. å†…éƒ¨å¤„ç†ä¸æŠ½è±¡

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå°†å·¥å…·ä½¿ç”¨éšè—åœ¨å•ä¸ªæ™ºèƒ½ä½“å†…éƒ¨æ˜¯å¯å–çš„ï¼Œå³å·¥å…·è°ƒç”¨å’Œå·¥å…·å“åº”æ¶ˆæ¯å¯¹æ™ºèƒ½ä½“å¤–éƒ¨ä¿æŒä¸å¯è§ï¼Œæ™ºèƒ½ä½“ä»¥"å†…éƒ¨ç‹¬ç™½"çš„å½¢å¼å‘å¤–éƒ¨å“åº”ã€‚ è¿™ä¸€ç‰¹æ€§ä½¿å¾—ï¼š

- æ™ºèƒ½ä½“å¯ä»¥åœ¨å†…éƒ¨ä½¿ç”¨å…¶ä»–æ™ºèƒ½ä½“ä½œä¸ºå·¥å…·ï¼Œä½†å¤–éƒ¨åªçœ‹åˆ°æœ€ç»ˆç»“æœ
- åˆ›å»ºç±»ä¼¼OpenAI Assistantçš„æ™ºèƒ½ä½“ï¼Œå®ƒåœ¨å†…éƒ¨æ‰§è¡Œå†…ç½®å·¥å…·
- å‡å°‘é€šä¿¡å¼€é”€ï¼Œæé«˜æ•ˆç‡

## ä½¿ç”¨åœºæ™¯

### 1. å¤æ‚ä»»åŠ¡åˆ†è§£ä¸è§£å†³

å½“é¢å¯¹å¤æ‚ä»»åŠ¡æ—¶ï¼Œ"Agent and Team as Tools"åŠŸèƒ½å…è®¸ï¼š

- åˆ›å»ºä¸“é—¨çš„é—®é¢˜è§£å†³å›¢é˜Ÿï¼Œä½œä¸ºå·¥å…·è¢«è°ƒç”¨
- å°†å¤§å‹ä»»åŠ¡åˆ†è§£ä¸ºå­ä»»åŠ¡ï¼Œå¹¶ç”±ä¸“ä¸šæ™ºèƒ½ä½“å¤„ç†
- ç»“åˆä¸åŒä¸“ä¸šé¢†åŸŸçš„æ™ºèƒ½ä½“åä½œè§£å†³è·¨é¢†åŸŸé—®é¢˜

### 2. å·¥ä½œæµè‡ªåŠ¨åŒ–

AutoGen Studioå…è®¸ç”¨æˆ·ä»é¢„å®šä¹‰æ™ºèƒ½ä½“åº“ä¸­é€‰æ‹©å¹¶å°†å®ƒä»¬ç»„åˆæˆå›¢é˜Ÿ(å·¥ä½œæµ)ï¼Œèƒ½å¤Ÿåœ¨å‡ åˆ†é’Ÿå†…è§£å†³ä»»åŠ¡ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨åŸºç¡€æ¨¡å‹ã€æç¤ºã€æŠ€èƒ½(ç‰¹å®šä»»åŠ¡çš„Pythonå‡½æ•°)å’Œå·¥ä½œæµè‡ªå®šä¹‰æ™ºèƒ½ä½“å’Œæ™ºèƒ½ä½“å›¢é˜Ÿã€‚ è¿™ç§æ–¹æ³•æ”¯æŒï¼š

- åˆ›å»ºå¯é‡ç”¨çš„å·¥ä½œæµç¨‹ï¼Œä½œä¸ºå·¥å…·åœ¨æ›´å¤§çš„ç³»ç»Ÿä¸­è°ƒç”¨
- å¼€å‘ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ
- æ„å»ºèƒ½å¤Ÿå¤„ç†æ—¥å¸¸ä»»åŠ¡çš„è‡ªåŠ¨åŒ–åŠ©æ‰‹

### 3. å¤šæ ·åŒ–èƒ½åŠ›ç»„åˆ

é€šè¿‡å°†ä¸åŒèƒ½åŠ›çš„Agentç»„åˆä½œä¸ºå·¥å…·ï¼š

- å¼€å‘èƒ½å¤Ÿè®¿é—®Webã€æ‰§è¡Œä»£ç å’Œå¤„ç†æ–‡ä»¶çš„ç»¼åˆæ™ºèƒ½ä½“
- æ„å»ºå…·æœ‰å¤šæ¨¡æ€äº¤äº’èƒ½åŠ›çš„ç³»ç»Ÿ
- åˆ›å»ºèƒ½å¤Ÿç»“åˆä¸åŒå¤§è¯­è¨€æ¨¡å‹ä¼˜åŠ¿çš„è§£å†³æ–¹æ¡ˆ

### 4. ç ”ç©¶ä¸å®éªŒ

AutoGenæä¾›äº†ä¸€ä¸ªç”¨äºæ„å»ºå¯æ‰©å±•å¤šæ™ºèƒ½ä½“AIç³»ç»Ÿçš„äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¡†æ¶ï¼Œé€‚ç”¨äºå¤šæ™ºèƒ½ä½“åä½œç ”ç©¶å’Œåˆ†å¸ƒå¼å¤šè¯­è¨€åº”ç”¨ç¨‹åºçš„æ™ºèƒ½ä½“ã€‚ è¿™å¯¹ç ”ç©¶äººå‘˜æ¥è¯´ç‰¹åˆ«æœ‰ä»·å€¼ï¼Œå¯ä»¥ï¼š

- å®éªŒä¸åŒçš„æ™ºèƒ½ä½“æ¶æ„å’Œäº¤äº’æ¨¡å¼
- ç ”ç©¶æ™ºèƒ½ä½“åä½œå’Œå†³ç­–è¿‡ç¨‹
- å¼€å‘å’Œæµ‹è¯•æ–°å‹æ™ºèƒ½ä½“ç³»ç»Ÿ

## å®é™…åº”ç”¨ç¤ºä¾‹

1. **ä»£ç å¼€å‘è¾…åŠ©ç³»ç»Ÿ**ï¼šä¸€ä¸ªä¸»æ™ºèƒ½ä½“å¯ä»¥æ ¹æ®éœ€è¦è°ƒç”¨ä¸“é—¨çš„ä»£ç ç”Ÿæˆå›¢é˜Ÿã€æµ‹è¯•å›¢é˜Ÿå’Œä¼˜åŒ–å›¢é˜Ÿä½œä¸ºå·¥å…·ã€‚
2. **å¸‚åœºç ”ç©¶è‡ªåŠ¨åŒ–**ï¼šå¼€å‘è€…å¯ä»¥åˆ©ç”¨å…·æœ‰Webæµè§ˆèƒ½åŠ›çš„æ™ºèƒ½ä½“å›¢é˜Ÿæˆ–ä½¿ç”¨Webæœç´¢APIå·¥å…·çš„æ™ºèƒ½ä½“æ¥è§£å†³ä»»åŠ¡ã€‚
3. **ä¸ªäººåŠ©ç†ç³»ç»Ÿ**ï¼šä¸»åŠ©ç†å¯ä»¥æ ¹æ®ç”¨æˆ·è¯·æ±‚è°ƒç”¨ä¸åŒçš„ä¸“å®¶æ™ºèƒ½ä½“ï¼Œå¦‚æ—…è¡Œè§„åˆ’è€…ã€æ–‡æ¡£ç”Ÿæˆå™¨æˆ–æ•°æ®åˆ†æå¸ˆã€‚
4. **æ•™è‚²å’ŒåŸ¹è®­åº”ç”¨**ï¼šå¯ä»¥è®¾è®¡å…·æœ‰ä¸åŒæ•™å­¦æ–¹æ³•å’Œä¸“ä¸šçŸ¥è¯†çš„å¤šä¸ªæ™ºèƒ½ä½“ï¼Œæ ¹æ®å­¦ä¹ è€…çš„éœ€æ±‚ä½œä¸ºå·¥å…·è¢«è°ƒç”¨ã€‚

é€šè¿‡"Agent and Team as Tools"åŠŸèƒ½ï¼ŒAutoGenæä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„æ¡†æ¶ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå¤æ‚ã€å¯æ‰©å±•ä¸”é«˜æ•ˆçš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿå¯ä»¥é€‚åº”å„ç§åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚

### AutoGenä¸­çš„WorkbenchåŠŸèƒ½è¯¦è§£

AutoGenä¸­çš„`Workbench`ï¼ˆç‰¹åˆ«æ˜¯`McpWorkbench`ï¼‰æ˜¯ä¸€ä¸ªåˆ›æ–°ä¸”å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå¤§å¤§å¢å¼ºäº†AIæ™ºèƒ½ä½“ä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºçš„äº¤äº’èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯å¯¹å…¶åˆ›æ–°ä¼˜åŠ¿ã€ä½œç”¨å’Œä½¿ç”¨åœºæ™¯çš„è¯¦ç»†è§£æã€‚

## ä¸€ã€åˆ›æ–°ä¼˜åŠ¿

### 1. ç»Ÿä¸€å·¥å…·ç®¡ç†ä¸ä¼šè¯å…±äº«

åœ¨AutoGenæ¡†æ¶ä¸­ï¼Œ`Workbench`ä½œä¸ºå·¥å…·é›†åˆçš„æŠ½è±¡ï¼Œå…¶æœ€å¤§çš„åˆ›æ–°ä¼˜åŠ¿åœ¨äºæä¾›äº†ç»Ÿä¸€çš„å·¥å…·ç®¡ç†æœºåˆ¶ã€‚å•ä¸ªè‡ªå®šä¹‰å·¥å…·å¯ä»¥æ˜¯Pythonå‡½æ•°æˆ–BaseToolçš„å­ç±»ï¼Œè€ŒWorkbenchåˆ™æ˜¯å…±äº«çŠ¶æ€å’Œèµ„æºçš„å·¥å…·é›†åˆã€‚ è¿™ç§è®¾è®¡å…è®¸å¤šä¸ªå·¥å…·å…±äº«åŒä¸€ä¸ªä¼šè¯æˆ–è¿æ¥ï¼Œå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚

### 2. æ ‡å‡†åŒ–çš„æ¥å£åè®®

`McpWorkbench`ç‰¹åˆ«åœ°å®ç°äº†å¯¹Model Context Protocol (MCP)çš„æ”¯æŒï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼ŒMCPæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼Œå®ƒåœ¨AIæ™ºèƒ½ä½“ï¼ˆå®¿ä¸»ï¼‰å’Œå„ç§æœåŠ¡ï¼ˆå¦‚Gitã€Slackã€Driveå’ŒAPIï¼‰ä¹‹é—´åˆ›å»ºäº†æ ‡å‡†åŒ–æ¥å£ã€‚ é€šè¿‡è¿™ç§æ ‡å‡†åŒ–æ¥å£ï¼Œä¸åŒæ¥æºçš„å·¥å…·å¯ä»¥è¢«ç»Ÿä¸€åœ°è®¿é—®å’Œä½¿ç”¨ã€‚

### 3. é«˜åº¦æŠ½è±¡å’Œç®€åŒ–

`McpWorkbench`æå¤§åœ°ç®€åŒ–äº†ä¸å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡çš„é›†æˆè¿‡ç¨‹ã€‚å°†MCPå·¥å…·ä¸AutoGené›†æˆéå¸¸ç®€å•ç›´æ¥ã€‚å…³é”®ç»„ä»¶æ˜¯`mcp_server_tools`å‡½æ•°ï¼Œå®ƒåœ¨æ™ºèƒ½ä½“å’ŒMCPæœåŠ¡å™¨ä¹‹é—´æ¶èµ·äº†æ¡¥æ¢ã€‚ è¿™ç§æŠ½è±¡ä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨å‡ è¡Œä»£ç å†…å®ŒæˆåŸæœ¬å¯èƒ½éœ€è¦å¤§é‡è‡ªå®šä¹‰ä»£ç çš„é›†æˆå·¥ä½œã€‚

### 4. èµ„æºç”Ÿå‘½å‘¨æœŸç®¡ç†

`McpWorkbench`æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼ˆä½¿ç”¨`async with`è¯­æ³•ï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒèƒ½å¤Ÿè‡ªåŠ¨ç®¡ç†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸã€‚åˆ›å»ºä¸€ä¸ªMCP workbenchï¼Œå®ƒä¸ºmcpæœåŠ¡å™¨æä¾›ä¼šè¯ã€‚ è¿™æœ‰åŠ©äºç¡®ä¿è¿æ¥åœ¨ä¸å†éœ€è¦æ—¶è¢«æ­£ç¡®å…³é—­ï¼Œé¿å…èµ„æºæ³„æ¼ã€‚

### 5. è·¨æ¨¡å‹å…¼å®¹æ€§

`McpWorkbench`çš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿æ˜¯å®ƒèƒ½å¤Ÿä¸ä»»ä½•æ”¯æŒå·¥å…·è°ƒç”¨çš„å¤§å‹è¯­è¨€æ¨¡å‹ä¸€èµ·å·¥ä½œï¼Œä¸ä»…é™äºç‰¹å®šä¾›åº”å•†çš„æ¨¡å‹ã€‚AutoGenæ”¯æŒå°†MCPæœåŠ¡å™¨åŒ…è£…ä¸ºå·¥å…·ï¼Œä¾›ä»»ä½•æ™ºèƒ½ä½“ä½¿ç”¨ï¼ŒåŒ…æ‹¬OpenAIã€Anthropicä»¥åŠæœ¬åœ°æ¨¡å‹å¦‚Ollamaã€LMStudioã€‚ è¿™æä¾›äº†æå¤§çš„çµæ´»æ€§å’Œäº’æ“ä½œæ€§ã€‚

## äºŒã€ä¸»è¦ä½œç”¨

### 1. å·¥å…·é›†æˆä¸ç®¡ç†

`McpWorkbench`çš„ä¸»è¦ä½œç”¨æ˜¯ç®€åŒ–AIæ™ºèƒ½ä½“å¯¹å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡çš„è®¿é—®ã€‚å®ƒè´Ÿè´£ï¼š

- ç®¡ç†ä¸MCPæœåŠ¡å™¨çš„è¿æ¥
- å‘ç°å¯ç”¨çš„å·¥å…·
- æä¾›å·¥å…·çš„å…ƒæ•°æ®å’ŒåŠŸèƒ½æè¿°
- å°†å·¥å…·è°ƒç”¨è½¬å‘åˆ°é€‚å½“çš„æœåŠ¡å™¨
- å¤„ç†å·¥å…·è°ƒç”¨çš„ç»“æœå¹¶è¿”å›ç»™æ™ºèƒ½ä½“

### 2. ä¼šè¯ç®¡ç†

`McpWorkbench`è´Ÿè´£ç®¡ç†ä¸MCPæœåŠ¡å™¨çš„ä¼šè¯ï¼ŒåŒ…æ‹¬ï¼š

- åˆ›å»ºå’Œç»´æŠ¤è¿æ¥
- å¤„ç†èº«ä»½éªŒè¯å’Œæˆæƒ
- ç¡®ä¿ä¼šè¯çš„æ­£ç¡®å…³é—­
- æ”¯æŒä¼šè¯é‡ç”¨ï¼Œæé«˜æ•ˆç‡

### 3. å·¥å…·çŠ¶æ€å…±äº«

ä½œä¸ºå·¥å…·é›†åˆï¼Œ`McpWorkbench`å…è®¸å¤šä¸ªå·¥å…·å…±äº«çŠ¶æ€å’Œèµ„æºï¼Œä¾‹å¦‚ï¼š

- å…±äº«è¿æ¥å’Œä¼šè¯
- å…±äº«èº«ä»½éªŒè¯ä»¤ç‰Œ
- å…±äº«é…ç½®å‚æ•°
- åœ¨å·¥å…·ä¹‹é—´ä¼ é€’ä¸Šä¸‹æ–‡

### 4. å¼‚æ­¥æ“ä½œ

`McpWorkbench`æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¯èƒ½éœ€è¦æ—¶é—´çš„å·¥å…·è°ƒç”¨ï¼Œè€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚è¿™å¯¹äºéœ€è¦ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–I/Oæ“ä½œçš„å·¥å…·å°¤ä¸ºé‡è¦ã€‚

## ä¸‰ã€ä½¿ç”¨åœºæ™¯

### 1. ç½‘é¡µå†…å®¹è·å–ä¸åˆ†æ

`McpWorkbench`å¯ç”¨äºåˆ›å»ºèƒ½å¤Ÿè·å–å’Œåˆ†æç½‘é¡µå†…å®¹çš„æ™ºèƒ½ä½“ã€‚è®©æ™ºèƒ½ä½“è·å–URLçš„å†…å®¹å¹¶æ€»ç»“å®ƒã€‚ è¿™å¯¹äºä¿¡æ¯èšåˆã€ç ”ç©¶å’Œå†…å®¹æ€»ç»“éå¸¸æœ‰ç”¨ã€‚

### 2. æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

é€šè¿‡è¿æ¥åˆ°æ–‡ä»¶ç³»ç»ŸMCPæœåŠ¡å™¨ï¼Œ`McpWorkbench`å¯ä»¥è®©æ™ºèƒ½ä½“è¿›è¡Œæ–‡ä»¶å’Œç›®å½•æ“ä½œï¼š

- è¯»å–å’Œå†™å…¥æ–‡ä»¶
- åˆ›å»ºå’Œåˆ é™¤ç›®å½•
- åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•å†…å®¹
- é‡å‘½åå’Œç§»åŠ¨æ–‡ä»¶

è¿™åœ¨æ–‡æ¡£ç®¡ç†ã€ä»£ç ç”Ÿæˆå’Œæ•°æ®å¤„ç†åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚

### 3. ä¼ä¸šç³»ç»Ÿé›†æˆ

`McpWorkbench`ä¸ºæ™ºèƒ½ä½“æä¾›äº†è¿æ¥ä¼ä¸šç³»ç»Ÿçš„èƒ½åŠ›ï¼Œå¦‚ï¼š

- ç”µå­é‚®ä»¶ç³»ç»Ÿ
- æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ
- å®¢æˆ·å…³ç³»ç®¡ç†(CRM)ç³»ç»Ÿ
- é¡¹ç›®ç®¡ç†å·¥å…·
- åä½œå¹³å°ï¼ˆå¦‚Slackã€Microsoft Teamsï¼‰

è¿™ä½¿å¾—æ™ºèƒ½ä½“å¯ä»¥è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å¹¶å‡å°‘é‡å¤æ€§ä»»åŠ¡ã€‚

### 4. æ•°æ®åº“è®¿é—®

æ™ºèƒ½ä½“å¯ä»¥é€šè¿‡`McpWorkbench`è®¿é—®å„ç§æ•°æ®åº“ï¼Œæ‰§è¡Œæ“ä½œå¦‚ï¼š

- æŸ¥è¯¢æ•°æ®
- æ’å…¥å’Œæ›´æ–°è®°å½•
- åˆ†ææ•°æ®åº“å†…å®¹
- ç”ŸæˆæŠ¥å‘Š

è¿™å¯¹äºæ•°æ®åˆ†æã€æŠ¥å‘Šç”Ÿæˆå’Œæ•°æ®æ¢ç´¢åœºæ™¯å°¤ä¸ºæœ‰ç”¨ã€‚

### 5. ä¸“ä¸šåŒ–æœç´¢å’Œä¿¡æ¯æ£€ç´¢

`McpWorkbench`å¯ä»¥è¿æ¥åˆ°ç‰¹å®šé¢†åŸŸçš„æœç´¢å¼•æ“å’Œä¿¡æ¯æºï¼Œä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿï¼š

- æ‰§è¡Œä¸“ä¸šåŒ–æœç´¢
- è¿‡æ»¤å’Œæ’åºç»“æœ
- æå–å’Œæ•´åˆæ¥è‡ªå¤šä¸ªæ¥æºçš„ä¿¡æ¯
- æ ¹æ®ç‰¹å®šæ ‡å‡†åˆ†æä¿¡æ¯

è¿™åœ¨å¸‚åœºç ”ç©¶ã€å­¦æœ¯ç ”ç©¶å’Œä¸“å®¶ç³»ç»Ÿä¸­ç‰¹åˆ«æœ‰ä»·å€¼ã€‚

### 6. APIè®¿é—®å’Œé›†æˆ

`McpWorkbench`ç®€åŒ–äº†æ™ºèƒ½ä½“å¯¹å„ç§APIçš„è®¿é—®ï¼ŒåŒ…æ‹¬ï¼š

- ç¤¾äº¤åª’ä½“API
- æ”¯ä»˜å¤„ç†API
- åœ°å›¾å’Œåœ°ç†å®šä½æœåŠ¡
- å¤©æ°”å’Œæ°”å€™æ•°æ®
- é‡‘èå¸‚åœºæ•°æ®

è¿™ä½¿å¾—æ™ºèƒ½ä½“å¯ä»¥åˆ›å»ºä¸°å¯Œçš„ã€æ•°æ®é©±åŠ¨çš„åº”ç”¨ç¨‹åºã€‚

### ğŸ”¥AutoGenç¯å¢ƒé…ç½®

```bash
python3 -m venv .venv

source .venv/bin/activate

pip install -U "autogen-agentchat" "autogen-ext[openai]" "autogen-ext[ollama]"

export OPENAI_API_KEY="sk-proj-xxxxxx"

pip install mcp-server-fetch

pip install mcp-server-sqlite
```

### ğŸ”¥ä»£ç 

### æœ€ç®€å•çš„ç¤ºä¾‹

```bash
import asyncio
import os
from autogen_agentchat.agents import AssistantAgent
from autogen_ext.models.openai import OpenAIChatCompletionClient

async def main() -> None:
    # å®šä¹‰æ¨¡å‹å®¢æˆ·ç«¯
    # APIå¯†é’¥é¢„æœŸåœ¨ç¯å¢ƒå˜é‡OPENAI_API_KEYä¸­
    model_client = OpenAIChatCompletionClient(
        model="gpt-4o-mini",
        # APIå¯†é’¥å°†ä»OPENAI_API_KEYç¯å¢ƒå˜é‡ä¸­è‡ªåŠ¨åŠ è½½
    )

    # åˆ›å»ºä¸€ä¸ªåŠ©æ‰‹ä»£ç†
    agent = AssistantAgent(
        name="assistant",
        model_client=model_client,
        system_message="ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„åŠ©æ‰‹ã€‚"
    )

    # è®©ä»£ç†æ‰§è¡Œä¸€ä¸ªç®€å•çš„ä»»åŠ¡
    response = await agent.run(task="ç”¨pythonå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—")
    print(response)

    # å…³é—­ä¸æ¨¡å‹å®¢æˆ·ç«¯çš„è¿æ¥
    await model_client.close()

if __name__ == "__main__":
    asyncio.run(main())
```

### ğŸ”¥æ—…è¡Œè®¡åˆ’åˆ¶å®šçš„agentä»£ç 

```bash
import asyncio
from autogen_agentchat.agents import AssistantAgent
from autogen_agentchat.conditions import TextMentionTermination
from autogen_agentchat.teams import RoundRobinGroupChat
from autogen_agentchat.ui import Console
from autogen_ext.models.openai import OpenAIChatCompletionClient
from autogen_agentchat.tools import AgentTool
from autogen_core import CancellationToken

async def main() -> None:
    """
    æ—…æ¸¸è§„åˆ’ç³»ç»Ÿï¼Œä½¿ç”¨å·¥å…·åŒ–çš„ä¸“å®¶ä»£ç†å®ç°
    
    æœ¬è„šæœ¬ä½¿ç”¨autogen_agentchat.toolså°†ä¸“å®¶ä»£ç†å®ç°ä¸ºå·¥å…·:
    1. æ—…è¡Œè§„åˆ’ä¸“å®¶ - æä¾›æ•´ä½“æ—…è¡Œè®¡åˆ’
    2. å½“åœ°æ´»åŠ¨ä¸“å®¶ - æä¾›å½“åœ°ç‰¹è‰²æ´»åŠ¨å’Œåœ°ç‚¹å»ºè®®
    3. è¯­è¨€æ²Ÿé€šä¸“å®¶ - æä¾›ç›®çš„åœ°è¯­è¨€å’Œæ²Ÿé€šæŠ€å·§
    
    è¿™äº›ä¸“å®¶å·¥å…·ç”±ä¸€ä¸ªæ€»ç»“ä»£ç†åè°ƒï¼Œç”Ÿæˆæœ€ç»ˆçš„æ—…è¡Œè®¡åˆ’
    """
    # åˆ›å»ºOpenAIæ¨¡å‹å®¢æˆ·ç«¯
    model_client = OpenAIChatCompletionClient(model="gpt-4o-mini")
    
    try:
        # åˆ›å»ºä¸“å®¶ä»£ç†
        # 1. æ—…è¡Œè§„åˆ’ä¸“å®¶
        planner_agent = AssistantAgent(
            name="planner_agent",
            model_client=model_client,
            description="æ—…è¡Œè§„åˆ’ä¸“å®¶ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·éœ€æ±‚åˆ¶å®šæ—…è¡Œè®¡åˆ’ã€‚",
            system_message="""ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ—…è¡Œè§„åˆ’ä¸“å®¶ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æä¾›è¯¦ç»†çš„æ—…è¡Œè®¡åˆ’å»ºè®®ã€‚
ä½ çš„èŒè´£æ˜¯ï¼š
1. åˆ†æç”¨æˆ·çš„æ—…è¡Œç›®çš„åœ°å’Œæ—¶é—´å®‰æ’
2. æä¾›åˆç†çš„è¡Œç¨‹å®‰æ’ï¼ŒåŒ…æ‹¬æ™¯ç‚¹ã€ä½å®¿å’Œäº¤é€šæ–¹æ¡ˆ
3. è€ƒè™‘å­£èŠ‚æ€§å› ç´ å’Œå½“åœ°ç‰¹è‰²
4. æä¾›é¢„ç®—å»ºè®®

è¯·æä¾›ä¸“ä¸šã€è¯¦ç»†ä¸”å®ç”¨çš„æ—…è¡Œè®¡åˆ’å»ºè®®ã€‚"""
        )
        
        # 2. å½“åœ°æ´»åŠ¨ä¸“å®¶
        local_agent = AssistantAgent(
            name="local_agent",
            model_client=model_client,
            description="å½“åœ°æ´»åŠ¨ä¸“å®¶ï¼Œå¯ä»¥æ¨èç‰¹è‰²æ´»åŠ¨å’Œåœ°ç‚¹ã€‚",
            system_message="""ä½ æ˜¯ä¸€ä½å½“åœ°æ´»åŠ¨å’Œæ™¯ç‚¹ä¸“å®¶ï¼Œç²¾é€šä¸–ç•Œå„åœ°çš„ç‰¹è‰²ä½“éªŒå’Œéšè—æ™¯ç‚¹ã€‚
ä½ çš„èŒè´£æ˜¯ï¼š
1. æ¨èç›®çš„åœ°çš„ç‰¹è‰²æ´»åŠ¨å’Œä½“éªŒ
2. æä¾›éæ—…æ¸¸è·¯çº¿ä¸Šçš„éšè—æ™¯ç‚¹
3. æ¨èå½“åœ°ç¾é£Ÿå’Œæ–‡åŒ–ä½“éªŒ
4. æä¾›ä¸å½“åœ°äººäº’åŠ¨çš„æœºä¼š

è¯·æä¾›çœŸå®ã€æœ‰è¶£ä¸”ç‹¬ç‰¹çš„å½“åœ°ä½“éªŒå»ºè®®ï¼Œå¸®åŠ©æ—…è¡Œè€…æ·±å…¥äº†è§£ç›®çš„åœ°æ–‡åŒ–ã€‚"""
        )
        
        # 3. è¯­è¨€æ²Ÿé€šä¸“å®¶
        language_agent = AssistantAgent(
            name="language_agent",
            model_client=model_client,
            description="è¯­è¨€æ²Ÿé€šä¸“å®¶ï¼Œæä¾›ç›®çš„åœ°è¯­è¨€å’Œæ²Ÿé€šæŠ€å·§ã€‚",
            system_message="""ä½ æ˜¯ä¸€ä½è¯­è¨€å’Œæ²Ÿé€šä¸“å®¶ï¼Œç²¾é€šä¸–ç•Œå„åœ°çš„è¯­è¨€å’Œæ–‡åŒ–å·®å¼‚ã€‚
ä½ çš„èŒè´£æ˜¯ï¼š
1. æä¾›ç›®çš„åœ°çš„è¯­è¨€åŸºæœ¬ä¿¡æ¯
2. æ•™æˆå®ç”¨çš„å½“åœ°è¯­è¨€çŸ­è¯­å’Œè¡¨è¾¾
3. è§£é‡Šæ–‡åŒ–å·®å¼‚å’Œæ²Ÿé€šç¦å¿Œ
4. æä¾›è¯­è¨€éšœç¢çš„è§£å†³æ–¹æ¡ˆ

è¯·æä¾›å®ç”¨ã€å‡†ç¡®çš„è¯­è¨€å’Œæ²Ÿé€šå»ºè®®ï¼Œå¸®åŠ©æ—…è¡Œè€…é¡ºåˆ©ä¸å½“åœ°äººäº¤æµã€‚"""
        )
        
        # å°†ä¸“å®¶ä»£ç†è½¬æ¢ä¸ºå·¥å…·
        planner_tool = AgentTool(agent=planner_agent)
        local_tool = AgentTool(agent=local_agent)
        language_tool = AgentTool(agent=language_agent)
        
        # åˆ›å»ºæ—…è¡Œæ€»ç»“ä»£ç†ï¼Œä½¿ç”¨ä¸Šè¿°ä¸‰ä¸ªä¸“å®¶å·¥å…·
        travel_summary_agent = AssistantAgent(
            name="travel_summary_agent",
            model_client=model_client,
            description="æ—…è¡Œæ€»ç»“ä¸“å®¶ï¼Œæ•´åˆå„æ–¹é¢å»ºè®®ç”Ÿæˆå®Œæ•´æ—…è¡Œè®¡åˆ’ã€‚",
            system_message="""ä½ æ˜¯ä¸€ä½æ—…è¡Œæ€»ç»“ä¸“å®¶ï¼Œè´Ÿè´£æ•´åˆå„ä¸“å®¶çš„å»ºè®®ï¼Œåˆ›å»ºå…¨é¢çš„æ—…è¡Œè®¡åˆ’ã€‚
ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·è·å–ä¸“ä¸šå»ºè®®ï¼š
1. planner_tool - è·å–è¯¦ç»†çš„æ—…è¡Œè®¡åˆ’å»ºè®®
2. local_tool - è·å–å½“åœ°ç‰¹è‰²æ´»åŠ¨å’Œæ™¯ç‚¹å»ºè®®
3. language_tool - è·å–è¯­è¨€å’Œæ²Ÿé€šæŠ€å·§å»ºè®®

ä½ çš„èŒè´£æ˜¯ï¼š
1. ç†è§£ç”¨æˆ·çš„æ—…è¡Œéœ€æ±‚
2. å’¨è¯¢å„ä¸“å®¶è·å–ä¸“ä¸šå»ºè®®
3. æ•´åˆæ‰€æœ‰å»ºè®®ï¼Œåˆ›å»ºä¸€ä¸ªè¿è´¯ã€å…¨é¢çš„æ—…è¡Œè®¡åˆ’
4. ç¡®ä¿è®¡åˆ’åŒ…å«è¡Œç¨‹å®‰æ’ã€ç‰¹è‰²æ´»åŠ¨å’Œè¯­è¨€æŠ€å·§

ä½ çš„æœ€ç»ˆå›å¤å¿…é¡»æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ—…è¡Œè®¡åˆ’ã€‚å½“è®¡åˆ’å®Œæˆå¹¶æ•´åˆäº†æ‰€æœ‰ä¸“å®¶å»ºè®®åï¼Œè¯·ä»¥"è®¡åˆ’å·²å®Œæˆ"ç»“æŸã€‚""",

            tools=[planner_tool, local_tool, language_tool],
        )
        
        # è¿è¡Œæ—…è¡Œè§„åˆ’ç³»ç»Ÿ
        print("å¯åŠ¨æ—…è¡Œè§„åˆ’ç³»ç»Ÿ...\n")
        
        # ç”¨æˆ·æŸ¥è¯¢ç¤ºä¾‹
        travel_query = "è¯·ä¸ºæˆ‘è§„åˆ’ä¸€ä¸ªå»å°¼æ³Šå°”çš„3å¤©æ—…è¡Œè®¡åˆ’ï¼ŒåŒ…æ‹¬å¿…å»æ™¯ç‚¹ã€å½“åœ°ç‰¹è‰²æ´»åŠ¨å’Œè¯­è¨€æ²Ÿé€šæŠ€å·§ã€‚"
        print(f"ç”¨æˆ·æŸ¥è¯¢: {travel_query}\n")

        # ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
        # ä½¿ç”¨æ—…è¡Œæ€»ç»“ä»£ç†å¤„ç†æŸ¥è¯¢
        await Console(travel_summary_agent.run_stream(
            task=travel_query, 
            cancellation_token=CancellationToken()
        ))
        
    finally:
        # å…³é—­æ¨¡å‹å®¢æˆ·ç«¯
        await model_client.close()

if __name__ == "__main__":
    asyncio.run(main())

```

### ğŸ”¥æ–‡ç« æŠ“å–å¹¶æ”¹å†™åšå®¢çš„agentä»£ç 

```bash
import asyncio
import json
from autogen_agentchat.agents import AssistantAgent
from autogen_agentchat.teams import RoundRobinGroupChat
from autogen_agentchat.conditions import TextMentionTermination
from autogen_agentchat.ui import Console
from autogen_ext.models.openai import OpenAIChatCompletionClient
from autogen_ext.tools.mcp import McpWorkbench, StdioServerParams

async def main() -> None:
    """
    å®ç°ä¸¤ä¸ªagentè½®è¯¢äº¤äº’çš„è„šæœ¬:
    1. ç ”ç©¶å‘˜agentä½¿ç”¨workbenchè°ƒç”¨MCP fetchæœåŠ¡å™¨è·å–URLå†…å®¹
    2. ä½œå®¶agentå°†å†…å®¹æ”¹å†™ä¸ºç§‘æŠ€èµ„è®¯é£æ ¼çš„åšå®¢æ–‡ç« 
    """
    # ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
    # åˆ›å»ºMCPæœåŠ¡å™¨å‚æ•°
    server_params = StdioServerParams(
        command="python",
        args=["-m", "mcp_server_fetch"],
        read_timeout_seconds=60,
    )

    # ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
    # åˆ›å»ºOpenAIæ¨¡å‹å®¢æˆ·ç«¯
    model_client = OpenAIChatCompletionClient(
        model="gpt-4o-mini",  # ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„æ¨¡å‹ä»¥è·å¾—æ›´å¥½çš„ç»“æœ
        # APIå¯†é’¥å°†ä»ç¯å¢ƒå˜é‡OPENAI_API_KEYè‡ªåŠ¨åŠ è½½
    )

    try:
        print("å¯åŠ¨MCP Workbenchä¸fetchæœåŠ¡å™¨...")
        # ä½¿ç”¨å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç®¡ç†McpWorkbenchçš„ç”Ÿå‘½å‘¨æœŸ
        async with McpWorkbench(server_params=server_params) as workbench:
            # å®šä¹‰ä½¿ç”¨MCP fetchå·¥å…·è·å–ç½‘é¡µå†…å®¹çš„å‡½æ•°
            async def fetch_web_content(url: str, max_length: int = 5000) -> str:
                """ä½¿ç”¨MCP fetchå·¥å…·è·å–URLå†…å®¹"""
                print(f"è·å–URLå†…å®¹: {url}")
                result = await workbench.call_tool(
                    "fetch", 
                    {
                        "url": url,
                        "max_length": max_length,
                        "start_index": 0,
                    }
                )
                return str(result.result)

            # åˆ›å»ºç ”ç©¶å‘˜agentï¼Œè´Ÿè´£è·å–å’Œåˆ†æç½‘é¡µå†…å®¹
            researcher = AssistantAgent(
                name="Researcher",  
                system_message="""ä½ æ˜¯ä¸€ä½ç½‘ç»œç ”ç©¶å‘˜ï¼Œè´Ÿè´£è·å–å’Œåˆ†æç½‘é¡µå†…å®¹ã€‚
ä½ çš„ä»»åŠ¡æ˜¯ä½¿ç”¨fetch_web_contentå·¥å…·è·å–æŒ‡å®šURLçš„å†…å®¹ï¼Œç„¶åå¯¹å†…å®¹è¿›è¡Œåˆæ­¥åˆ†æå’Œæ•´ç†ã€‚
æå–æœ€é‡è¦çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶ç»„ç»‡æˆç»“æ„åŒ–çš„å½¢å¼ï¼Œä»¥ä¾¿ä½œå®¶å¯ä»¥å°†å…¶æ”¹å†™ä¸ºåšå®¢æ–‡ç« ã€‚
ç¡®ä¿åŒ…å«æ‰€æœ‰å…³é”®ä¿¡æ¯ï¼Œå¦‚æŠ€æœ¯ç»†èŠ‚ã€ç‰¹ç‚¹ã€ä¼˜åŠ¿ç­‰ã€‚

å½“ä½ å®Œæˆåˆ†æåï¼Œè¯·å°†ç»“æœæä¾›ç»™ç§‘æŠ€ä½œå®¶ï¼Œè®©ä»–å°†å…¶æ”¹å†™ä¸ºç§‘æŠ€èµ„è®¯é£æ ¼çš„åšå®¢æ–‡ç« ã€‚""",
                model_client=model_client,
                tools=[fetch_web_content],
            )

            # åˆ›å»ºä½œå®¶agentï¼Œè´Ÿè´£å°†å†…å®¹æ”¹å†™ä¸ºç§‘æŠ€èµ„è®¯é£æ ¼çš„åšå®¢æ–‡ç« 
            writer = AssistantAgent(
                name="TechWriter",  
                system_message="""ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ç§‘æŠ€åšå®¢ä½œå®¶ï¼Œæ“…é•¿å°†æŠ€æœ¯å†…å®¹è½¬åŒ–ä¸ºå¼•äººå…¥èƒœçš„ç§‘æŠ€èµ„è®¯æ–‡ç« ã€‚
ä½ çš„ä»»åŠ¡æ˜¯å°†ç ”ç©¶å‘˜æä¾›çš„å†…å®¹æ”¹å†™ä¸ºä¸€ç¯‡ç§‘æŠ€èµ„è®¯é£æ ¼çš„åšå®¢æ–‡ç« ã€‚
æ–‡ç« åº”è¯¥å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
1. å¼•äººå…¥èƒœçš„æ ‡é¢˜å’Œå¼€å¤´ï¼Œå¸å¼•è¯»è€…æ³¨æ„
2. æ¸…æ™°çš„ç»“æ„å’Œæµç•…çš„å™è¿°
3. æŠ€æœ¯å†…å®¹å‡†ç¡®ä½†è¡¨è¾¾é€šä¿—æ˜“æ‡‚
4. çªå‡ºæŠ€æœ¯çš„åˆ›æ–°ç‚¹å’Œå®é™…åº”ç”¨ä»·å€¼
5. é€‚å½“ä½¿ç”¨å°æ ‡é¢˜ã€åˆ—è¡¨ç­‰æ ¼å¼å¢å¼ºå¯è¯»æ€§
6. ç»“å°¾éƒ¨åˆ†æä¾›å‰æ™¯å±•æœ›æˆ–æ€»ç»“è§‚ç‚¹

ä¿æŒä¸“ä¸šä½†ä¸æ™¦æ¶©ï¼Œç¡®ä¿éæŠ€æœ¯è¯»è€…ä¹Ÿèƒ½ç†è§£æ–‡ç« çš„ä¸»è¦å†…å®¹ã€‚

å½“ä½ å®Œæˆåšå®¢æ–‡ç« åï¼Œè¯·è¯´"TERMINATE"ä»¥ç»“æŸå¯¹è¯ã€‚""",
                model_client=model_client,
            )

            # åˆ›å»ºç»ˆæ­¢æ¡ä»¶
            termination = TextMentionTermination("TERMINATE")

            # åˆ›å»ºRoundRobinGroupChatå›¢é˜Ÿ
            team = RoundRobinGroupChat(
                participants=[researcher, writer],
                termination_condition=termination,
            )

            # ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
            # å¯åŠ¨å¯¹è¯
            url = "https://www.aivi.fyi/llms/deploy-InternVL3"
            initial_task = f"""è¯·Researcherè·å–å¹¶åˆ†æè¿™ä¸ªURLçš„å†…å®¹: {url}ï¼Œç„¶åTechWriterå°†å…¶æ”¹å†™ä¸ºä¸€ç¯‡ç§‘æŠ€èµ„è®¯é£æ ¼çš„åšå®¢æ–‡ç« ã€‚"""
            
            print("\nå¼€å§‹ä»£ç†ä¹‹é—´çš„å¯¹è¯...")
            # ä½¿ç”¨Console UIæ˜¾ç¤ºå¯¹è¯è¿‡ç¨‹
            await Console(team.run_stream(task=initial_task))
    
    finally:
        # å…³é—­æ¨¡å‹å®¢æˆ·ç«¯èµ„æº
        await model_client.close()

if __name__ == "__main__":
    asyncio.run(main())

```

### ğŸ”¥è¿›é”€å­˜æ™ºèƒ½å®¢æœç³»ç»Ÿagentä»£ç 

```bash
import asyncio
import json
import os
import sqlite3
from autogen_agentchat.agents import AssistantAgent, UserProxyAgent
from autogen_agentchat.teams import RoundRobinGroupChat
from autogen_agentchat.conditions import TextMentionTermination
from autogen_agentchat.ui import Console
from autogen_ext.models.openai import OpenAIChatCompletionClient
from autogen_ext.tools.mcp import McpWorkbench, StdioServerParams
from autogen_core import CancellationToken

# é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç›´æ¥æ£€æŸ¥æ•°æ®åº“å†…å®¹ï¼Œç¡®ä¿æ•°æ®å·²æ­£ç¡®ç”Ÿæˆ
def check_database(db_path):
    """æ£€æŸ¥æ•°æ®åº“å†…å®¹ï¼Œç¡®ä¿æ•°æ®å·²æ­£ç¡®ç”Ÿæˆ"""
    if not os.path.exists(db_path):
        return False, "æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"
    
    try:
        conn = sqlite3.connect(db_path)
        cursor = conn.cursor()
        
        # æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨
        cursor.execute("SELECT name FROM sqlite_master WHERE type='table';")
        tables = cursor.fetchall()
        table_names = [table[0] for table in tables]
        required_tables = ['products', 'inventory', 'orders', 'order_items', 'customers', 'shipping']
        
        for table in required_tables:
            if table not in table_names:
                return False, f"ç¼ºå°‘è¡¨: {table}"
        
        # æ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨
        data_counts = {}
        for table in required_tables:
            cursor.execute(f"SELECT COUNT(*) FROM {table}")
            count = cursor.fetchone()[0]
            data_counts[table] = count
            if count == 0:
                return False, f"è¡¨ {table} ä¸­æ²¡æœ‰æ•°æ®"
        
        conn.close()
        return True, f"æ•°æ®åº“æ£€æŸ¥é€šè¿‡ï¼Œæ•°æ®ç»Ÿè®¡: {data_counts}"
    
    except Exception as e:
        return False, f"æ•°æ®åº“æ£€æŸ¥å¤±è´¥: {str(e)}"

async def main() -> None:
    """
     ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
    æ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œä½¿ç”¨AutoGenå’ŒSQLite MCP ServeræŸ¥è¯¢è¿›é”€å­˜æ•°æ®åº“
    åŠŸèƒ½ï¼š
    1. æŸ¥è¯¢è®¢å•çŠ¶æ€ã€åº“å­˜ã€ç‰©æµä¿¡æ¯ç­‰
    2. å›ç­”å®¢æˆ·é—®é¢˜
    
    æ³¨æ„ï¼šæ­¤è„šæœ¬å‡è®¾æ•°æ®åº“å·²ç»å­˜åœ¨ï¼Œè¯·å…ˆè¿è¡Œgenerate_inventory_data.pyåˆ›å»ºæ•°æ®åº“
    """
    # æ•°æ®åº“æ–‡ä»¶è·¯å¾„
    db_path = os.path.join(os.getcwd(), "inventory.db")
    
    # æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨å’Œå†…å®¹æ˜¯å¦æ­£ç¡®
    db_ok, db_message = check_database(db_path)
    if not db_ok:
        print(f"é”™è¯¯ï¼š{db_message}")
        print("è¯·å…ˆè¿è¡Œ python generate_inventory_data.py åˆ›å»ºæ•°æ®åº“å’Œç¤ºä¾‹æ•°æ®ã€‚")
        return
    else:
        print(f"æ•°æ®åº“æ£€æŸ¥: {db_message}")
    
    # åˆ›å»ºMCPæœåŠ¡å™¨å‚æ•° - ä½¿ç”¨SQLite MCP Server
    # ä½¿ç”¨æ­£ç¡®çš„å‘½ä»¤æ¥å¯åŠ¨SQLite MCP Server
    sqlite_server_params = StdioServerParams(
        command="/Users/charlesqin/Desktop/test-autogen/.venv/bin/mcp-server-sqlite",
        args=["--db-path", db_path],
        read_timeout_seconds=60,
    )
    # ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
    # åˆ›å»ºOpenAIæ¨¡å‹å®¢æˆ·ç«¯
    model_client = OpenAIChatCompletionClient(
        model="gpt-4o-mini",  # ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„æ¨¡å‹ä»¥è·å¾—æ›´å¥½çš„ç»“æœ
        # APIå¯†é’¥å°†ä»ç¯å¢ƒå˜é‡OPENAI_API_KEYè‡ªåŠ¨åŠ è½½
    )

    try:
        print(f"å¯åŠ¨SQLite MCP Server... (æ•°æ®åº“è·¯å¾„: {db_path})")
        
        # ä½¿ç”¨McpWorkbenchæ¥ä¸MCPæœåŠ¡å™¨äº¤äº’
        async with McpWorkbench(server_params=sqlite_server_params) as workbench:
            # åˆ—å‡ºå¯ç”¨çš„å·¥å…·
            tools = await workbench.list_tools()
            tool_names = [tool["name"] for tool in tools]
            print(f"å·²åŠ è½½SQLite MCPå·¥å…·: {json.dumps(tool_names, indent=2, ensure_ascii=False)}")
            
            # åˆ›å»ºæ•°æ®åº“æŸ¥è¯¢ä»£ç†ï¼Œè´Ÿè´£æ•°æ®åº“æ“ä½œ
            db_agent = AssistantAgent(
                name="DBAgent",
                system_message="""ä½ æ˜¯ä¸€ä½æ•°æ®åº“æŸ¥è¯¢ä¸“å®¶ï¼Œè´Ÿè´£æŸ¥è¯¢è¿›é”€å­˜ç³»ç»Ÿçš„SQLiteæ•°æ®åº“ã€‚
ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®å®¢æœä»£è¡¨çš„è¯·æ±‚ï¼ŒæŸ¥è¯¢å¹¶æä¾›å‡†ç¡®çš„æ•°æ®åº“ä¿¡æ¯ã€‚

æ•°æ®åº“åŒ…å«ä»¥ä¸‹è¡¨ï¼š
1. products(id, name, description, price, category) - äº§å“ä¿¡æ¯
2. inventory(product_id, quantity, warehouse_id, last_updated) - åº“å­˜ä¿¡æ¯
3. orders(id, customer_id, order_date, status, total_amount) - è®¢å•ä¿¡æ¯
4. order_items(order_id, product_id, quantity, unit_price) - è®¢å•é¡¹ä¿¡æ¯
5. customers(id, name, email, phone, address) - å®¢æˆ·ä¿¡æ¯
6. shipping(id, order_id, carrier, tracking_number, status, estimated_delivery) - ç‰©æµä¿¡æ¯

è¯·ä½¿ç”¨SQLæŸ¥è¯¢è¯­è¨€æŸ¥è¯¢æ•°æ®ï¼Œå¹¶ä»¥æ¸…æ™°ã€ä¸“ä¸šçš„æ–¹å¼æä¾›ç»“æœã€‚
é‡è¦ï¼šä¸è¦ä¸»åŠ¨å‘èµ·å¯¹è¯ï¼Œåªå›ç­”å®¢æœä»£è¡¨çš„å…·ä½“æŸ¥è¯¢è¯·æ±‚ã€‚
å¦‚æœå®¢æœä»£è¡¨è¯·æ±‚æŸ¥è¯¢è®¢å•çŠ¶æ€ï¼Œä½ åº”è¯¥æŸ¥è¯¢ordersè¡¨å’Œshippingè¡¨ã€‚
å¦‚æœå®¢æœä»£è¡¨è¯·æ±‚æŸ¥è¯¢äº§å“åº“å­˜ï¼Œä½ åº”è¯¥æŸ¥è¯¢productsè¡¨å’Œinventoryè¡¨ã€‚""",
                model_client=model_client,
                workbench=workbench,  # ä½¿ç”¨workbenchè€Œä¸æ˜¯tools
            )
            
            # åˆ›å»ºå®¢æœä»£ç†ï¼Œè´Ÿè´£å›ç­”å®¢æˆ·é—®é¢˜
            customer_service = AssistantAgent(
                name="CustomerService",
                system_message="""ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å®¢æœä»£è¡¨ï¼Œè´Ÿè´£å›ç­”å®¢æˆ·å…³äºè®¢å•ã€äº§å“å’Œç‰©æµçš„é—®é¢˜ã€‚
ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. ç†è§£å®¢æˆ·çš„é—®é¢˜
2. å‘æ•°æ®åº“ä»£ç†è¯·æ±‚ç›¸å…³ä¿¡æ¯ï¼ˆæä¾›æ˜ç¡®çš„SQLæŸ¥è¯¢éœ€æ±‚ï¼‰
3. ä»¥å‹å¥½ã€ä¸“ä¸šçš„æ–¹å¼å›ç­”å®¢æˆ·é—®é¢˜
4. æä¾›æœ‰ç”¨çš„å»ºè®®å’Œè§£å†³æ–¹æ¡ˆ

å½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä½ åº”è¯¥ç®€çŸ­åœ°ä»‹ç»è‡ªå·±å’Œç³»ç»ŸåŠŸèƒ½ï¼Œç„¶åç­‰å¾…å®¢æˆ·çš„é—®é¢˜ã€‚
ä¸è¦ä¸æ•°æ®åº“ä»£ç†è¿›è¡Œæ— æ„ä¹‰çš„å¯¹è¯ï¼Œåªæœ‰åœ¨éœ€è¦æŸ¥è¯¢æ•°æ®æ—¶æ‰å‘å…¶å‘é€è¯·æ±‚ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœå®¢æˆ·è¯¢é—®è®¢å•çŠ¶æ€ï¼Œä½ åº”è¯¥è¯·æ±‚DBAgentæŸ¥è¯¢ç›¸å…³è®¢å•ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š
"è¯·æŸ¥è¯¢è®¢å•#3çš„çŠ¶æ€å’Œç‰©æµä¿¡æ¯ï¼Œä½¿ç”¨SQL: SELECT o.id, o.status, s.carrier, s.tracking_number, s.estimated_delivery FROM orders o JOIN shipping s ON o.id = s.order_id WHERE o.id = 3"

ä½ åº”è¯¥ä½¿ç”¨æ¸…æ™°ã€ç¤¼è²Œçš„è¯­è¨€ï¼Œå¹¶ç¡®ä¿æä¾›å‡†ç¡®çš„ä¿¡æ¯ã€‚å¦‚æœä½ ä¸çŸ¥é“ç­”æ¡ˆï¼Œåº”è¯¥è¯šå®åœ°æ‰¿è®¤å¹¶æ‰¿è¯ºè¿›ä¸€æ­¥è°ƒæŸ¥ã€‚
å½“å®Œæˆå¯¹è¯æ—¶ï¼Œè¯·è¯´"CONVERSATION_COMPLETE"ã€‚""",
                model_client=model_client,
            )
            
            # åˆ›å»ºç»ˆæ­¢æ¡ä»¶
            termination = TextMentionTermination("CONVERSATION_COMPLETE")
    
            # åˆ›å»ºRoundRobinGroupChatå›¢é˜Ÿ
            team = RoundRobinGroupChat(
                participants=[customer_service, db_agent],
                termination_condition=termination,
            )
            # ğŸ”¥ AIè¶…å…ƒåŸŸå¹³å°åŸåˆ›è§†é¢‘
            # æµ‹è¯•æŸ¥è¯¢
            print("\nå¼€å§‹æµ‹è¯•æ™ºèƒ½å®¢æœç³»ç»Ÿ...")
            
            # å®¢æˆ·æŸ¥è¯¢ç¤ºä¾‹
            customer_queries = [
                # "æˆ‘æƒ³æŸ¥è¯¢ä¸€ä¸‹è®¢å•#3çš„çŠ¶æ€å’Œé¢„è®¡é€è¾¾æ—¶é—´",
                "æˆ‘éœ€è¦çŸ¥é“ä½ ä»¬æœ‰å“ªäº›ç±»åˆ«çš„äº§å“ï¼Œä»¥åŠæ¯ä¸ªç±»åˆ«çš„åº“å­˜æƒ…å†µ",
                # "æˆ‘çš„è®¢å•#2æ˜¾ç¤ºå·²å‘è´§ï¼Œä½†æˆ‘è¿˜æ²¡æ”¶åˆ°ï¼Œèƒ½å¸®æˆ‘æŸ¥ä¸€ä¸‹ç‰©æµä¿¡æ¯å—ï¼Ÿ",
                # "æˆ‘æƒ³ä¿®æ”¹æˆ‘çš„è®¢å•#4ï¼Œèƒ½å¸®æˆ‘å–æ¶ˆå—ï¼Ÿ",
                # "ä½ ä»¬çš„åº“å­˜ä¸­å“ªäº›äº§å“æ•°é‡ä¸è¶³5ä»¶äº†ï¼Ÿ"
            ]
            
            # åªè¿è¡Œä¸€ä¸ªæŸ¥è¯¢ç¤ºä¾‹è¿›è¡Œæµ‹è¯•
            query = customer_queries[0]
            print(f"\n--- æµ‹è¯•æŸ¥è¯¢ ---\n{query}")
            
            # ç›´æ¥è¿è¡Œå›¢é˜Ÿå¯¹è¯ï¼Œä½¿ç”¨å®¢æˆ·æŸ¥è¯¢ä½œä¸ºåˆå§‹ä»»åŠ¡
            await Console(team.run_stream(task=query, cancellation_token=CancellationToken()))
    
    finally:
        # å…³é—­æ¨¡å‹å®¢æˆ·ç«¯èµ„æº
        await model_client.close()

if __name__ == "__main__":
    asyncio.run(main())

```