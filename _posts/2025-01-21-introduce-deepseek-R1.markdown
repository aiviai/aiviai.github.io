---
layout: single
title: "ğŸš€DeepSeek-R1å‘å¸ƒï¼çœŸèƒ½è¶…è¶Šgpt-4oå—ï¼ŸçœŸå®èƒ½åŠ›å®¢è§‚è¯„æµ‹ï¼Œæ¨ç†èƒ½åŠ›+ç¼–ç¨‹èƒ½åŠ›ï¼Roo Cline+deepseek-reasonerèƒ½å¦å®ç°æ¸¸æˆå¼€å‘æµ‹è¯•ï¼"
sidebar:
  nav: "docs"
date: 2025-01-21 00:00:00 +0800
categories: LLMs
tags: [LLMs, deepseek, Roo Cline, Text to SQL, SQL, åŸºå‡†æµ‹è¯•, AI]
classes: wide
author_profile: true
---

DeepSeek-R1æ˜¯ç”±å¹»æ–¹é‡åŒ–æ——ä¸‹çš„AIå…¬å¸æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰å‘å¸ƒçš„ä¸€ä¸ªå¤§å‹è¯­è¨€æ¨¡å‹ã€‚å®ƒåœ¨åè®­ç»ƒé˜¶æ®µå¤§è§„æ¨¡åº”ç”¨äº†å¼ºåŒ–å­¦ä¹ æŠ€æœ¯ï¼Œæå¤§åœ°æå‡äº†æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œå°¤å…¶åœ¨æ•°å­¦ã€ä»£ç å’Œè‡ªç„¶è¯­è¨€æ¨ç†ç­‰ä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ã€‚

### **æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š**
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ é€šè¿‡å“”å“©å“”å“©è§‚çœ‹](https://www.bilibili.com/video/BV1shwaefEdk/)
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ é€šè¿‡YouTubeè§‚çœ‹](https://youtu.be/pUOhVxsJ5bI)
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ æˆ‘çš„å¼€æºé¡¹ç›®](https://github.com/win4r/AISuperDomain)
- [ğŸ‘‰ğŸ‘‰ğŸ‘‰ è¯·æˆ‘å–å’–å•¡](https://ko-fi.com/aila)
- ğŸ‘‰ğŸ‘‰ğŸ‘‰ æˆ‘çš„å¾®ä¿¡ï¼šstoeng ã€åŠ æˆ‘è¯·æ³¨æ˜æ¥æ„ã€‘
- ğŸ‘‰ğŸ‘‰ğŸ‘‰ æ‰¿æ¥å¤§æ¨¡å‹å¾®è°ƒã€RAGã€AIæ™ºèƒ½ä½“ã€AIç›¸å…³åº”ç”¨å¼€å‘ç­‰é¡¹ç›®ã€‚

### DeepSeek-R1çš„ç‰¹ç‚¹

- **æ€§èƒ½å¼ºå¤§ï¼š** åœ¨å¤šä¸ªæ–¹é¢ä¸OpenAI o1æ­£å¼ç‰ˆæ€§èƒ½ç›¸å½“ï¼Œç”šè‡³åœ¨æŸäº›ä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½ã€‚
- **å®Œå…¨å¼€æºï¼š** é‡‡ç”¨MITå¼€æºè®¸å¯è¯ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æ¨¡å‹ã€‚
- **å¤§è§„æ¨¡RLåè®­ç»ƒï¼š** é€šè¿‡å¼ºåŒ–å­¦ä¹ æŠ€æœ¯ï¼Œæ¨¡å‹åœ¨æå°‘æ ‡æ³¨æ•°æ®çš„æƒ…å†µä¸‹ä¹Ÿèƒ½å–å¾—ä¼˜å¼‚è¡¨ç°ã€‚
- **å¼€æ”¾APIï¼š** æä¾›ä¾¿æ·çš„APIæ¥å£ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé›†æˆã€‚
- **ä»·æ ¼äº²æ°‘ï¼š** APIæœåŠ¡å®šä»·è¿œä½äºåŒç±»äº§å“ï¼Œæå…·ç«äº‰åŠ›ã€‚

### DeepSeek-R1çš„ä¼˜åŠ¿

- **æ¨åŠ¨æŠ€æœ¯è¿›æ­¥ï¼š** é€šè¿‡å¼€æºï¼ŒDeepSeek-R1èƒ½å¤ŸåŠ é€Ÿæ•´ä¸ªAIç¤¾åŒºçš„æŠ€æœ¯å‘å±•ã€‚
- **é™ä½å¼€å‘æˆæœ¬ï¼š** å¼€å‘è€…å¯ä»¥åŸºäºDeepSeek-R1å¿«é€Ÿæ„å»ºå„ç§AIåº”ç”¨ã€‚
- **ä¿ƒè¿›åˆ›æ–°ï¼š** å¼€æ”¾çš„ç”Ÿæ€ç³»ç»Ÿæœ‰åˆ©äºæ¿€å‘æ›´å¤šçš„åˆ›æ–°ã€‚

### DeepSeek-R1çš„åº”ç”¨åœºæ™¯

- **è‡ªç„¶è¯­è¨€å¤„ç†ï¼š** æ–‡æœ¬ç”Ÿæˆã€ç¿»è¯‘ã€é—®ç­”ã€æ‘˜è¦ç­‰ã€‚
- **ä»£ç ç”Ÿæˆï¼š** è‡ªåŠ¨ç”Ÿæˆä»£ç ã€ä»£ç è¡¥å…¨ç­‰ã€‚
- **æ•°å­¦æ¨ç†ï¼š** è§£å†³æ•°å­¦é—®é¢˜ã€è¯æ˜å®šç†ç­‰ã€‚

### ğŸš€ğŸš€ğŸš€è§†é¢‘ä¸­çš„æµ‹è¯•é¢˜ï¼š

### ğŸ”¥ç»³å­

```python
ä¸€æ ¹è¶³å¤Ÿé•¿ä¸”å¯ä»¥è¢«æ‹‰ä¼¸çš„æ©¡çš®ç­‹æ­£å¥½å¯ä»¥ç»•åœ°çƒèµ¤é“ä¸€åœˆã€‚
å½“ç»•åœ°çƒèµ¤é“ä¸€åœˆåï¼Œå†æ‹‰é•¿1ç±³ï¼Œæ©¡çš®ç­‹ä¼šç¦»åœ°çƒè¡¨é¢å¤šé«˜ï¼Ÿ
```

### ğŸ”¥èœ¡çƒ›

```python
æŠŠè£…æœ‰ä¸€å‡æ°´çš„çƒ§æ¯å›ºå®šåœ¨è·ç¦»æ¡Œé¢20å˜ç±³çš„çš„é«˜åº¦ï¼Œæ­¤æ—¶æ°´æ¸©ä¸º1æ‘„æ°åº¦ã€‚
åœ¨çƒ§æ¯ä¸‹æ”¾ä¸€æ ¹é•¿åº¦ä¸º17å˜ç±³ã€ç›´å¾„ä¸º1å˜ç±³çš„èœ¡çƒ›ï¼Œç„¶åç‚¹ç‡ƒèœ¡çƒ›åŠ çƒ­çƒ§æ¯ã€‚
çƒ§æ¯é‡Œçš„æ°´éœ€è¦å¤šä¹…èƒ½è¾¾åˆ°æ²¸è…¾çš„çŠ¶æ€ï¼Ÿ
```

### ğŸ”¥è¢‹å­

```python
Aæç€è´­ç‰©è¢‹å¾’æ­¥èµ°äº†10å…¬é‡Œå›å®¶ï¼Œ
è´­ç‰©è¢‹é‡Œè£…æœ‰10ä¸ªç›´å¾„ä¸º10å…¬åˆ†çš„é‡‘å±å°çƒå’Œ10ä¸ªç›´å¾„ä¸º10å…¬åˆ†çš„æ°¢æ°”çƒã€‚
ä½†æ˜¯å½“èµ°åˆ°ç¬¬5å…¬é‡Œçš„æ—¶å€™ï¼Œè´­ç‰©è¢‹åº•éƒ¨ç ´äº†ä¸€ä¸ªç›´å¾„ä¸º11å…¬åˆ†çš„æ´ï¼Œ
æ­¤æ—¶Aæ¯èµ°ä¸€å…¬é‡Œå°±ä¼šæ‰è½10ä¸ªå°çƒã€‚
å½“Aèµ°åˆ°ç¬¬10å…¬é‡Œçš„æ—¶å€™ï¼Œè´­ç‰©è¢‹é‡Œè¿˜å‰©å‡ ä¸ªå°çƒï¼Ÿ
```

### ğŸ”¥é’è›™

```python
ä¸€åªé’è›™åœ¨æ—©ä¸Š6ç‚¹çš„æ—¶å€™æ‰è¿›äº†äº•é‡Œï¼Œ
æ­¤æ—¶äº•é‡Œçš„æ°´é¢è·ç¦»äº•å£10ç±³ã€‚
é’è›™æ¯å¤©æ—©ä¸Š8ç‚¹å¼€å§‹å¾€ä¸Šçˆ¬ï¼Œçˆ¬äº†ä¸€å°æ—¶åªçˆ¬äº†3ç±³ï¼Œ
ç„¶åé’è›™ä¼‘æ¯ä¸å†å¾€ä¸Šçˆ¬ï¼Œä¼‘æ¯çš„æ—¶å€™é’è›™ä¸‹æ»‘äº†2ç±³ã€‚
äº•é‡Œçš„æ°´åœ¨æ¯å¤©æ™šä¸Š8ç‚¹ä¸Šæ¶¨2ç±³ã€‚
è¯·é—®é’è›™å‡ å¤©èƒ½çˆ¬å‡ºäº•å£ã€‚
```

### ğŸ”¥ç®—æ³•é¢˜

```jsx
 ç”¨pythonå†™ä¸€ä¸ªç¨‹åºæ¥æ‰¾å‡º179424673æ˜¯ç¬¬å‡ ä¸ªè´¨æ•°ï¼Œä¸è¦å¼•å…¥å¤–éƒ¨åº“
```

### ğŸ”¥çº¢çœ¼ç›ä¸è“çœ¼ç›

```jsx
ä¸€ä¸ªå²›ä¸Šæœ‰100ä¸ªäººï¼Œå…¶ä¸­95ä¸ªæ˜¯è“çœ¼ç›ï¼Œ5ä¸ªæ˜¯çº¢çœ¼ç›ã€‚å²›ä¸Šæœ‰ä¸‰ä¸ªå¥‡æ€ªçš„è§„åˆ™ï¼š
1. ä¸èƒ½é€šè¿‡é•œå­å’Œæ°´é¢æ¥çœ‹è‡ªå·±çœ¼ç›çš„é¢œè‰²ã€‚
2. ä¸èƒ½å‘Šè¯‰å¯¹æ–¹åˆ«äººçš„çœ¼ç›é¢œè‰²ã€‚
3. ä¸€æ—¦çŸ¥é“è‡ªå·±çœ¼ç›çš„é¢œè‰²ï¼Œå¿…é¡»åœ¨å½“å¤œç¦»å²›ã€‚
è™½ç„¶é¢˜è®¾è¯´æœ‰5ä¸ªçº¢çœ¼ç›ï¼Œä½†å²›æ°‘å¹¶ä¸çŸ¥é“ã€‚ 
ä¸€å¤©ï¼Œæœ‰ä¸€ä¸ªæ—…è¡Œè€…æ¥åˆ°å²›ä¸Šï¼Œå½“ç€æ‰€æœ‰äººçš„é¢ï¼Œ
ä¸ç•™ç¥è¯´äº†ä¸€å¥ï¼šä½ ä»¬è¿™é‡Œæœ‰çº¢çœ¼ç›çš„äººï¼Œå²›æ°‘éƒ½å¬åˆ°äº†è¿™å¥è¯ã€‚
å‡è®¾å²›æ°‘éƒ½æ˜¯èªæ˜äººï¼Œé—®è¿™ä¸ªå²›æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Ÿ

# AIè¶…å…ƒåŸŸé¢‘é“åŸåˆ›è§†é¢‘
```

### ğŸ”¥åŒç”Ÿå­ä½¯è°¬

```python
ä¸¤è‰˜é£èˆ¹åŒæ—¶ä»åœ°çƒå‡ºå‘ï¼Œé£èˆ¹Aä»¥å…‰é€Ÿçš„99%çš„é€Ÿåº¦ä»åœ°çƒé£å¾€åŠäººé©¬åº§ï¼Œ
é£èˆ¹Bä»¥å…‰é€Ÿçš„99.999999999999%çš„é€Ÿåº¦ä»åœ°çƒé£å¾€åŠäººé©¬åº§ï¼Œ
è¯·é—®é£èˆ¹BæŠµè¾¾åŠäººé©¬åº§å¤šä¹…ä¹‹åé£èˆ¹Aæ‰èƒ½æŠµè¾¾åŠäººé©¬åº§

# AIè¶…å…ƒåŸŸé¢‘é“åŸåˆ›è§†é¢‘
```

### ğŸ”¥ğŸ”¥ğŸ”¥æ•°æ®åº“æµ‹è¯•ä»£ç å’Œæ­£ç¡®çš„SQLè¯­å¥

```jsx
import sqlite3
from datetime import datetime, timedelta
import random

class InventorySystem:
    def __init__(self):
        # åˆ›å»ºå†…å­˜æ•°æ®åº“è¿æ¥
        self.conn = sqlite3.connect(':memory:')
        self.cursor = self.conn.cursor()
        self.init_database()
        
    def init_database(self):
        """åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„"""
        # åˆ›å»ºå•†å“è¡¨
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            product_id INTEGER PRIMARY KEY AUTOINCREMENT,
            product_name TEXT NOT NULL,
            category TEXT NOT NULL,
            specification TEXT NOT NULL,
            unit TEXT NOT NULL,
            price DECIMAL(10,2) NOT NULL,
            stock_quantity INTEGER NOT NULL
        )
        ''')
        
        # åˆ›å»ºé‡‡è´­è¡¨
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS purchases (
            purchase_id INTEGER PRIMARY KEY AUTOINCREMENT,
            product_id INTEGER NOT NULL,
            quantity INTEGER NOT NULL,
            purchase_price DECIMAL(10,2) NOT NULL,
            supplier TEXT NOT NULL,
            purchase_date DATETIME NOT NULL,
            FOREIGN KEY (product_id) REFERENCES products (product_id)
        )
        ''')
        
        # åˆ›å»ºé”€å”®è¡¨
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS sales (
            sale_id INTEGER PRIMARY KEY AUTOINCREMENT,
            product_id INTEGER NOT NULL,
            quantity INTEGER NOT NULL,
            sale_price DECIMAL(10,2) NOT NULL,
            customer TEXT NOT NULL,
            sale_date DATETIME NOT NULL,
            FOREIGN KEY (product_id) REFERENCES products (product_id)
        )
        ''')
        
        self.conn.commit()
    
    def add_product(self, product_name, category, specification, unit, price, stock_quantity):
        """æ·»åŠ æ–°å•†å“"""
        sql = """INSERT INTO products 
                (product_name, category, specification, unit, price, stock_quantity) 
                VALUES (?, ?, ?, ?, ?, ?)"""
        self.cursor.execute(sql, (product_name, category, specification, unit, price, stock_quantity))
        self.conn.commit()
        return self.cursor.lastrowid
    
    def update_product(self, product_id, **kwargs):
        """æ›´æ–°å•†å“ä¿¡æ¯"""
        valid_fields = {'product_name', 'category', 'specification', 'unit', 'price', 'stock_quantity'}
        updates = []
        values = []
        
        for field, value in kwargs.items():
            if field in valid_fields and value is not None:
                updates.append(f"{field} = ?")
                values.append(value)
                
        if not updates:
            return False
            
        sql = f"UPDATE products SET {', '.join(updates)} WHERE product_id = ?"
        values.append(product_id)
        self.cursor.execute(sql, values)
        self.conn.commit()
        return self.cursor.rowcount > 0
    
    def add_purchase(self, product_id, quantity, purchase_price, supplier):
        """æ·»åŠ é‡‡è´­è®°å½•"""
        purchase_date = datetime.now()
        sql = """INSERT INTO purchases 
                (product_id, quantity, purchase_price, supplier, purchase_date) 
                VALUES (?, ?, ?, ?, ?)"""
        self.cursor.execute(sql, (product_id, quantity, purchase_price, supplier, purchase_date))
        
        # æ›´æ–°åº“å­˜
        self.cursor.execute("""
            UPDATE products 
            SET stock_quantity = stock_quantity + ? 
            WHERE product_id = ?
        """, (quantity, product_id))
        
        self.conn.commit()
        return self.cursor.lastrowid

    def add_sale(self, product_id, quantity, sale_price, customer):
        """æ·»åŠ é”€å”®è®°å½•"""
        # æ£€æŸ¥åº“å­˜æ˜¯å¦è¶³å¤Ÿ
        self.cursor.execute("SELECT stock_quantity FROM products WHERE product_id = ?", (product_id,))
        current_stock = self.cursor.fetchone()[0]
        
        if current_stock < quantity:
            raise ValueError(f"åº“å­˜ä¸è¶³ (å½“å‰åº“å­˜: {current_stock}, è¯·æ±‚æ•°é‡: {quantity})")
        
        sale_date = datetime.now()
        sql = """INSERT INTO sales 
                (product_id, quantity, sale_price, customer, sale_date) 
                VALUES (?, ?, ?, ?, ?)"""
        self.cursor.execute(sql, (product_id, quantity, sale_price, customer, sale_date))
        
        # æ›´æ–°åº“å­˜
        self.cursor.execute("""
            UPDATE products 
            SET stock_quantity = stock_quantity - ? 
            WHERE product_id = ?
        """, (quantity, product_id))
        
        self.conn.commit()
        return self.cursor.lastrowid
    
    def get_product(self, product_id):
        """æŸ¥è¯¢å•†å“ä¿¡æ¯"""
        sql = "SELECT * FROM products WHERE product_id = ?"
        self.cursor.execute(sql, (product_id,))
        return self.cursor.fetchone()
    
    def get_all_products(self):
        """æŸ¥è¯¢æ‰€æœ‰å•†å“"""
        sql = "SELECT * FROM products ORDER BY category, product_name"
        self.cursor.execute(sql)
        return self.cursor.fetchall()
    
    def get_purchase_history(self, product_id=None, start_date=None, end_date=None):
        """æŸ¥è¯¢é‡‡è´­å†å²"""
        conditions = []
        params = []
        
        if product_id:
            conditions.append("p.product_id = ?")
            params.append(product_id)
        if start_date:
            conditions.append("p.purchase_date >= ?")
            params.append(start_date)
        if end_date:
            conditions.append("p.purchase_date <= ?")
            params.append(end_date)
            
        where_clause = " AND ".join(conditions)
        if where_clause:
            where_clause = "WHERE " + where_clause
            
        sql = f"""
            SELECT p.purchase_id, pr.product_name, pr.category, pr.specification,
                   p.quantity, pr.unit, p.purchase_price, p.supplier, p.purchase_date
            FROM purchases p
            JOIN products pr ON p.product_id = pr.product_id
            {where_clause}
            ORDER BY p.purchase_date DESC
        """
        self.cursor.execute(sql, params)
        return self.cursor.fetchall()

    def get_sale_history(self, product_id=None, start_date=None, end_date=None):
        """æŸ¥è¯¢é”€å”®å†å²"""
        conditions = []
        params = []
        
        if product_id:
            conditions.append("s.product_id = ?")
            params.append(product_id)
        if start_date:
            conditions.append("s.sale_date >= ?")
            params.append(start_date)
        if end_date:
            conditions.append("s.sale_date <= ?")
            params.append(end_date)
            
        where_clause = " AND ".join(conditions)
        if where_clause:
            where_clause = "WHERE " + where_clause
            
        sql = f"""
            SELECT s.sale_id, pr.product_name, pr.category, pr.specification,
                   s.quantity, pr.unit, s.sale_price, s.customer, s.sale_date
            FROM sales s
            JOIN products pr ON s.product_id = pr.product_id
            {where_clause}
            ORDER BY s.sale_date DESC
        """
        self.cursor.execute(sql, params)
        return self.cursor.fetchall()

    def execute_custom_sql(self, sql_query, params=None):
        """æ‰§è¡Œè‡ªå®šä¹‰SQLæŸ¥è¯¢"""
        try:
            if params:
                self.cursor.execute(sql_query, params)
            else:
                self.cursor.execute(sql_query)
            
            # è·å–åˆ—å
            column_names = [description[0] for description in self.cursor.description] if self.cursor.description else []
            
            # è·å–æŸ¥è¯¢ç»“æœ
            results = self.cursor.fetchall()
            
            return column_names, results
        except sqlite3.Error as e:
            print(f"SQLæ‰§è¡Œé”™è¯¯: {e}")
            return [], []
        except Exception as e:
            print(f"æ‰§è¡Œé”™è¯¯: {e}")
            return [], []
            
            
 def generate_test_data():
    """ç”Ÿæˆæµ‹è¯•æ•°æ®"""
    system = InventorySystem()
    
    # å•†å“æ•°æ®
    products_data = [
        # é£Ÿå“é¥®æ–™ç±»
        ("å¯å£å¯ä¹", "é¥®æ–™", "330ml", "ç½", 3.00, 1000),
        ("ç™¾äº‹å¯ä¹", "é¥®æ–™", "330ml", "ç½", 3.00, 800),
        ("å†œå¤«å±±æ³‰", "é¥®æ–™", "550ml", "ç“¶", 2.00, 1500),
        ("åº·å¸ˆå‚…æ–¹ä¾¿é¢", "é£Ÿå“", "çº¢çƒ§ç‰›è‚‰å‘³", "è¢‹", 4.50, 2000),
        ("ç»Ÿä¸€è€å›é…¸èœé¢", "é£Ÿå“", "é…¸èœå‘³", "è¢‹", 4.50, 1800),
        ("ä¹äº‹è–¯ç‰‡", "é›¶é£Ÿ", "åŸå‘³", "åŒ…", 7.50, 500),
        ("æ—ºæ—ºé›ªé¥¼", "é›¶é£Ÿ", "åŸå‘³", "åŒ…", 8.50, 600),
        
        # æ—¥ç”¨å“ç±»
        ("æµ·é£ä¸æ´—å‘æ°´", "æ´—æŠ¤", "750ml", "ç“¶", 58.90, 200),
        ("ä½³æ´å£«ç‰™è†", "æ´—æŠ¤", "180g", "æ”¯", 12.90, 300),
        ("èˆ’è‚¤ä½³é¦™çš‚", "æ´—æŠ¤", "115g", "å—", 6.90, 400),
        ("è“æœˆäº®æ´—è¡£æ¶²", "æ¸…æ´", "2kg", "ç“¶", 39.90, 150),
        ("å¨çŒ›å…ˆç”Ÿ", "æ¸…æ´", "500ml", "ç“¶", 15.90, 180),
        
        # æ–‡å…·ç±»
        ("å¾—åŠ›åœ†ç ç¬”", "æ–‡å…·", "0.5mmè“è‰²", "æ”¯", 1.50, 1000),
        ("çœŸå½©è®°å·ç¬”", "æ–‡å…·", "é»‘è‰²", "æ”¯", 3.50, 500),
        ("æ™¨å…‰ç¬”è®°æœ¬", "æ–‡å…·", "A5/40é¡µ", "æœ¬", 3.90, 800),
        
        # ç”µå™¨ç±»
        ("ç¾çš„ç”µé¥­ç…²", "ç”µå™¨", "4L", "å°", 299.00, 50),
        ("æ ¼åŠ›ç”µé£æ‰‡", "ç”µå™¨", "è½åœ°æ‰‡", "å°", 199.00, 40),
        ("é£åˆ©æµ¦ç”µå¹é£", "ç”µå™¨", "1800W", "ä¸ª", 129.00, 60),
        
        # æœè£…ç±»
        ("ç”·å£«Tæ¤", "æœè£…", "çº¯æ£‰/Mç ", "ä»¶", 69.00, 100),
        ("å¥³å£«è¿è¡£è£™", "æœè£…", "æ£‰è´¨/Lç ", "ä»¶", 129.00, 80)
    ]
    
    # ä¾›åº”å•†åˆ—è¡¨
    suppliers = [
        "DDDé£Ÿå“é…é€æœ‰é™å…¬å¸",
        "CCCæ—¥ç”¨å“æ‰¹å‘å¸‚åœº",
        "AAAæ–‡å…·æ‰¹å‘å•†",
        "FFFç”µå™¨è´¸æ˜“æœ‰é™å…¬å¸",
        "LLLæœè£…æ‰¹å‘å¸‚åœº"
    ]
    
    # å®¢æˆ·åˆ—è¡¨
    customers = [
        "å¼ ä¸‰è¶…å¸‚",
        "æå››ä¾¿åˆ©åº—",
        "ç‹äº”å°å–éƒ¨",
        "èµµå…­å•†åº—",
        "å‘¨ä¸ƒç™¾è´§",
        "å´å…«ä¾¿åˆ©åº—",
        "éƒ‘ä¹è¶…å¸‚",
        "é¡¾åå°åº—"
    ]
    
    # æ·»åŠ å•†å“
    product_ids = {}
    for product_data in products_data:
        product_id = system.add_product(*product_data)
        product_ids[product_data[0]] = product_id
    
    # ç”Ÿæˆè¿‡å»30å¤©çš„é‡‡è´­å’Œé”€å”®è®°å½•
    end_date = datetime.now()
    start_date = end_date - timedelta(days=30)
    current_date = start_date
    
    while current_date <= end_date:
        # æ¯å¤©éšæœºé€‰æ‹©3-8ä¸ªå•†å“è¿›è¡Œé‡‡è´­
        for _ in range(random.randint(3, 8)):
            product_name = random.choice(list(product_ids.keys()))
            product_id = product_ids[product_name]
            quantity = random.randint(10, 100)
            # é‡‡è´­ä»·æ ¼æ¯”é”€å”®ä»·æ ¼ä½10-20%
            original_price = [p[4] for p in products_data if p[0] == product_name][0]
            purchase_price = original_price * random.uniform(0.8, 0.9)
            supplier = random.choice(suppliers)
            
            # æ·»åŠ é‡‡è´­è®°å½•ï¼Œæ—¥æœŸè®¾ç½®ä¸ºå½“å‰æ¨¡æ‹Ÿæ—¥æœŸ
            sql = """INSERT INTO purchases 
                    (product_id, quantity, purchase_price, supplier, purchase_date) 
                    VALUES (?, ?, ?, ?, ?)"""
            system.cursor.execute(sql, (product_id, quantity, purchase_price, supplier, current_date))
            
            # æ›´æ–°åº“å­˜
            system.cursor.execute("""
                UPDATE products 
                SET stock_quantity = stock_quantity + ? 
                WHERE product_id = ?
            """, (quantity, product_id))
        
        # æ¯å¤©éšæœºé€‰æ‹©5-15ä¸ªå•†å“è¿›è¡Œé”€å”®
        for _ in range(random.randint(5, 15)):
            product_name = random.choice(list(product_ids.keys()))
            product_id = product_ids[product_name]
            
            # è·å–å½“å‰åº“å­˜
            system.cursor.execute("SELECT stock_quantity FROM products WHERE product_id = ?", (product_id,))
            current_stock = system.cursor.fetchone()[0]
            
            # ç¡®ä¿é”€å”®æ•°é‡ä¸è¶…è¿‡åº“å­˜
            max_sale_quantity = min(current_stock, 50)  # é™åˆ¶å•æ¬¡æœ€å¤§é”€å”®æ•°é‡ä¸º50
            if max_sale_quantity > 0:
                quantity = random.randint(1, max_sale_quantity)
                original_price = [p[4] for p in products_data if p[0] == product_name][0]
                # é”€å”®ä»·æ ¼åœ¨åŸä»·åŸºç¡€ä¸Šæ³¢åŠ¨-5%åˆ°+10%
                sale_price = original_price * random.uniform(0.95, 1.10)
                customer = random.choice(customers)
                
                # æ·»åŠ é”€å”®è®°å½•
                sql = """INSERT INTO sales 
                        (product_id, quantity, sale_price, customer, sale_date) 
                        VALUES (?, ?, ?, ?, ?)"""
                system.cursor.execute(sql, (product_id, quantity, sale_price, customer, current_date))
                
                # æ›´æ–°åº“å­˜
                system.cursor.execute("""
                    UPDATE products 
                    SET stock_quantity = stock_quantity - ? 
                    WHERE product_id = ?
                """, (quantity, product_id))
        
        system.conn.commit()
        current_date += timedelta(days=1)
    
    return system

def print_test_data(system):
    """æ‰“å°æµ‹è¯•æ•°æ®"""
    print("=== å•†å“ä¿¡æ¯ ===")
    print("ID | å•†å“åç§° | ç±»åˆ« | è§„æ ¼ | å•ä½ | ä»·æ ¼ | åº“å­˜")
    print("-" * 80)
    for product in system.get_all_products():
        print(f"{product[0]:2d} | {product[1]:10s} | {product[2]:4s} | {product[3]:8s} | {product[4]:2s} | {product[5]:6.2f} | {product[6]:4d}")
    
    print("\n=== æœ€è¿‘é‡‡è´­è®°å½• (æœ€æ–°10æ¡) ===")
    print("ID | å•†å“åç§° | æ•°é‡ | å•ä½ | é‡‡è´­ä»· | ä¾›åº”å•† | æ—¥æœŸ")
    print("-" * 80)
    purchases = system.get_purchase_history()[:10]
    for purchase in purchases:
        print(f"{purchase[0]:2d} | {purchase[1]:10s} | {purchase[4]:4d} | {purchase[5]:2s} | {purchase[6]:6.2f} | {purchase[7]:10s} | {purchase[8]}")
    
    print("\n=== æœ€è¿‘é”€å”®è®°å½• (æœ€æ–°10æ¡) ===")
    print("ID | å•†å“åç§° | æ•°é‡ | å•ä½ | é”€å”®ä»· | å®¢æˆ· | æ—¥æœŸ")
    print("-" * 80)
    sales = system.get_sale_history()[:10]
    for sale in sales:
        print(f"{sale[0]:2d} | {sale[1]:10s} | {sale[4]:4d} | {sale[5]:2s} | {sale[6]:6.2f} | {sale[7]:10s} | {sale[8]}")

def get_statistics(system):
    """è·å–ç»Ÿè®¡æ•°æ®"""
    print("\n=== ç»Ÿè®¡ä¿¡æ¯ ===")
    
    # åº“å­˜æ€»å€¼
    system.cursor.execute("""
        SELECT SUM(stock_quantity * price) as total_value
        FROM products
    """)
    total_inventory_value = system.cursor.fetchone()[0]
    print(f"å½“å‰åº“å­˜æ€»å€¼: Â¥{total_inventory_value:,.2f}")
    
    # å„ç±»åˆ«å•†å“æ•°é‡å’Œåº“å­˜æ€»å€¼
    system.cursor.execute("""
        SELECT category,
               COUNT(*) as product_count,
               SUM(stock_quantity) as total_quantity,
               SUM(stock_quantity * price) as category_value
        FROM products
        GROUP BY category
        ORDER BY category_value DESC
    """)
    print("\nç±»åˆ«ç»Ÿè®¡:")
    print("ç±»åˆ« | å•†å“ç§ç±» | æ€»åº“å­˜æ•°é‡ | åº“å­˜æ€»å€¼")
    print("-" * 50)
    for category_stat in system.cursor.fetchall():
        print(f"{category_stat[0]:4s} | {category_stat[1]:8d} | {category_stat[2]:10d} | Â¥{category_stat[3]:,.2f}")
    
    # æœ€è¿‘30å¤©é”€å”®é¢å’Œåˆ©æ¶¦
    system.cursor.execute("""
        SELECT 
            COUNT(*) as sale_count,
            SUM(s.quantity * s.sale_price) as total_sales,
            SUM(s.quantity * (s.sale_price - p.purchase_price)) as total_profit
        FROM sales s
        JOIN purchases p ON s.product_id = p.product_id
        WHERE s.sale_date >= date('now', '-30 days')
    """)
    sales_stat = system.cursor.fetchone()
    print(f"\næœ€è¿‘30å¤©:")
    print(f"é”€å”®ç¬”æ•°: {sales_stat[0]}")
    print(f"é”€å”®æ€»é¢: Â¥{sales_stat[1]:,.2f}")
    print(f"é¢„ä¼°åˆ©æ¶¦: Â¥{sales_stat[2]:,.2f}")
    
    # é”€é‡å‰10çš„å•†å“
    system.cursor.execute("""
        SELECT 
            p.product_name,
            p.category,
            SUM(s.quantity) as total_quantity,
            SUM(s.quantity * s.sale_price) as total_sales
        FROM sales s
        JOIN products p ON s.product_id = p.product_id
        WHERE s.sale_date >= date('now', '-30 days')
        GROUP BY p.product_id
        ORDER BY total_quantity DESC
        LIMIT 10
    """)
    print("\næœ€è¿‘30å¤©é”€é‡TOP10:")
    print("å•†å“åç§° | ç±»åˆ« | é”€å”®æ•°é‡ | é”€å”®é¢")
    print("-" * 50)
    for top_product in system.cursor.fetchall():
        print(f"{top_product[0]:10s} | {top_product[1]:4s} | {top_product[2]:8d} | Â¥{top_product[3]:,.2f}")

def print_query_results(column_names, results):
    """æ ¼å¼åŒ–æ‰“å°SQLæŸ¥è¯¢ç»“æœ"""
    if not column_names or not results:
        print("æ²¡æœ‰æŸ¥è¯¢ç»“æœ")
        return
    
    # è®¡ç®—æ¯åˆ—çš„æœ€å¤§å®½åº¦
    col_widths = []
    for i, col in enumerate(column_names):
        # è·å–åˆ—åå’Œè¯¥åˆ—æ‰€æœ‰å€¼çš„æœ€å¤§é•¿åº¦
        max_width = len(str(col))
        for row in results:
            max_width = max(max_width, len(str(row[i])))
        col_widths.append(max_width + 2)  # åŠ 2ä¸ºäº†ç•™å‡ºé—´è·
    
    # æ‰“å°è¡¨å¤´
    header = "".join(str(col).ljust(width) for col, width in zip(column_names, col_widths))
    print(header)
    print("-" * sum(col_widths))
    
    # æ‰“å°æ•°æ®è¡Œ
    for row in results:
        row_str = "".join(str(val).ljust(width) for val, width in zip(row, col_widths))
        print(row_str)

def main():
    # ç”Ÿæˆæµ‹è¯•æ•°æ®
    print("æ­£åœ¨ç”Ÿæˆæµ‹è¯•æ•°æ®...")
    system = generate_test_data()
    
    # æ‰“å°æµ‹è¯•æ•°æ®
    print_test_data(system)
    
    # æ‰“å°ç»Ÿè®¡ä¿¡æ¯
    get_statistics(system)
    
    # è‡ªå®šä¹‰SQLæŸ¥è¯¢ç•Œé¢
    while True:
        print("\n=== è‡ªå®šä¹‰SQLæŸ¥è¯¢ ===")
        print("è¾“å…¥ 'exit' é€€å‡º")
        sql = input("è¯·è¾“å…¥SQLæŸ¥è¯¢è¯­å¥: ").strip()
        
        if sql.lower() == 'exit':
            break
        
        if sql:
            columns, results = system.execute_custom_sql(sql)
            print("\næŸ¥è¯¢ç»“æœ:")
            print_query_results(columns, results)

if __name__ == "__main__":
    main()

```

### æŸ¥è¯¢ç¤ºä¾‹

1. è®¡ç®—æ¯ä¸ªå•†å“çš„é”€å”®åˆ©æ¶¦ï¼ˆé”€å”®æ”¶å…¥ - é‡‡è´­æˆæœ¬ï¼‰ï¼š

```
SELECT 
    p.product_name,
    p.category,
    SUM(s.quantity * s.sale_price) as total_sales_revenue,
    SUM(s.quantity * pur.purchase_price) as total_purchase_cost,
    SUM(s.quantity * (s.sale_price - pur.purchase_price)) as total_profit
FROM products p
JOIN sales s ON p.product_id = s.product_id
JOIN purchases pur ON p.product_id = pur.product_id
GROUP BY p.product_id
ORDER BY total_profit DESC;
```

1. æŸ¥è¯¢æ¯ä¸ªä¾›åº”å•†çš„é‡‡è´­é‡‘é¢å’Œé‡‡è´­å•†å“ç±»åˆ«åˆ†å¸ƒï¼š

```python
SELECT 
    pur.supplier,
    p.category,
    COUNT(DISTINCT p.product_id) as product_count,
    SUM(pur.quantity * pur.purchase_price) as total_purchase_amount,
    GROUP_CONCAT(DISTINCT p.product_name) as products
FROM purchases pur
JOIN products p ON pur.product_id = p.product_id
GROUP BY pur.supplier, p.category
ORDER BY pur.supplier, total_purchase_amount DESC;
```

1. åˆ†ææ¯ä¸ªå®¢æˆ·çš„è´­ä¹°è¡Œä¸ºå’Œæ¶ˆè´¹é‡‘é¢ï¼š

```python
SELECT 
    s.customer,
    COUNT(DISTINCT p.category) as category_count,
    COUNT(DISTINCT p.product_id) as product_count,
    SUM(s.quantity) as total_items,
    SUM(s.quantity * s.sale_price) as total_spend,
    GROUP_CONCAT(DISTINCT p.category) as purchased_categories
FROM sales s
JOIN products p ON s.product_id = p.product_id
GROUP BY s.customer
ORDER BY total_spend DESC;
```

1. æŸ¥è¯¢æ¯ä¸ªç±»åˆ«ä¸­æœ€ç•…é”€çš„å•†å“åŠå…¶é”€å”®è¯¦æƒ…ï¼š

```python
WITH RankedProducts AS (
    SELECT 
        p.category,
        p.product_name,
        SUM(s.quantity) as total_quantity,
        SUM(s.quantity * s.sale_price) as total_revenue,
        ROW_NUMBER() OVER (PARTITION BY p.category ORDER BY SUM(s.quantity) DESC) as rank
    FROM products p
    JOIN sales s ON p.product_id = s.product_id
    GROUP BY p.category, p.product_name
)
SELECT 
    category,
    product_name,
    total_quantity,
    total_revenue
FROM RankedProducts
WHERE rank = 1
ORDER BY total_revenue DESC;
```

1. æŸ¥è¯¢å•†å“çš„åº“å­˜å‘¨è½¬æƒ…å†µï¼š

```python
SELECT 
    p.product_name,
    p.category,
    p.stock_quantity as current_stock,
    SUM(pur.quantity) as total_purchased,
    SUM(s.quantity) as total_sold,
    ROUND(CAST(SUM(s.quantity) AS FLOAT) / NULLIF(p.stock_quantity, 0), 2) as turnover_rate
FROM products p
LEFT JOIN purchases pur ON p.product_id = pur.product_id
LEFT JOIN sales s ON p.product_id = s.product_id
GROUP BY p.product_id
HAVING total_purchased > 0
ORDER BY turnover_rate DESC;
```

1. æŸ¥è¯¢é”€é‡å‰5çš„å•†å“

```python
SELECT p.product_name, p.category, SUM(s.quantity) as total_sales
FROM products p
JOIN sales s ON p.product_id = s.product_id
GROUP BY p.product_id
ORDER BY total_sales DESC
LIMIT 5
```

1. -- æŸ¥è¯¢æ¯ä¸ªç±»åˆ«çš„å¹³å‡ä»·æ ¼

```python
SELECT category, AVG(price) as avg_price
FROM products
GROUP BY category
ORDER BY avg_price DESC

```

8.  -- æŸ¥è¯¢åº“å­˜é‡è¾ƒä½çš„å•†å“ï¼ˆä½äº100ä»¶ï¼‰

```python
SELECT product_name, category, stock_quantity
FROM products
WHERE stock_quantity < 100
ORDER BY stock_quantity

```

### ğŸ”¥é€šè¿‡Roo Clineè°ƒç”¨deepseekç”Ÿæˆçš„ä»£ç ï¼Œå­˜åœ¨bug

1. index.html

```python
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>èµ›åšæ‰«é›·2077</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="cyber-terminal">
        <div class="control-panel">
            <button class="cyber-button" data-difficulty="easy">ç®€å•æ¨¡å¼</button>
            <button class="cyber-button" data-difficulty="medium">ä¸­ç­‰æ¨¡å¼</button>
            <button class="cyber-button" data-difficulty="hard">åœ°ç‹±æ¨¡å¼</button>
            <div class="hud">
                <span id="mineCount" class="hud-text">é›·æ•°: 10</span>
                <span id="timer" class="hud-text">æ—¶é—´: 0</span>
            </div>
        </div>
        <div id="grid" class="cyber-grid"></div>
        <button id="restart" class="cyber-button neon-pulse">ç³»ç»Ÿé‡ç½®</button>
        <div id="explosion" class="explosion"></div>
    </div>
    <script src="script.js"></script>
</body>
</html>
```

1. style.css

```python
:root {
    --neon-blue: #0ff;
    --neon-pink: #f0f;
    --matrix-green: #0f0;
    --cyber-bg: #000;
}

body {
    background: linear-gradient(45deg, #1a1a1a, #0d0d0d);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Courier New', monospace;
    color: var(--neon-blue);
}

.cyber-terminal {
    border: 3px solid var(--neon-blue);
    padding: 2rem;
    box-shadow: 0 0 20px var(--neon-blue);
    background: rgba(0, 0, 0, 0.9);
    position: relative;
    overflow: visible; /* å…è®¸çˆ†ç‚¸æ•ˆæœæº¢å‡º */
}

.cyber-grid {
    display: grid;
    gap: 2px;
    margin: 1rem 0;
    background: rgba(255, 255, 255, 0.1);
    padding: 5px;
}

.grid-cell {
    width: 30px;
    height: 30px;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    position: relative;
    transition: all 0.2s;
    border: 1px solid rgba(0, 255, 255, 0.3);
}

.grid-cell:hover {
    background: #222;
    box-shadow: 0 0 10px var(--neon-blue);
}

.grid-cell.revealed {
    background: #001a1a;
}

.grid-cell.mine {
    background: #330000;
}

@keyframes neonPulse {
    0% { text-shadow: 0 0 5px var(--neon-blue); }
    50% { text-shadow: 0 0 20px var(--neon-blue), 0 0 10px var(--neon-pink); }
    100% { text-shadow: 0 0 5px var(--neon-blue); }
}

.cyber-button {
    background: #002;
    border: 2px solid var(--neon-blue);
    color: var(--neon-blue);
    padding: 10px 20px;
    margin: 0 5px;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 2px;
    position: relative;
    overflow: hidden;
}

.cyber-button:hover {
    background: var(--neon-blue);
    color: #000;
    box-shadow: 0 0 20px var(--neon-blue);
}

@keyframes explosion {
    0% { transform: scale(0); opacity: 1; }
    50% { transform: scale(8); background: radial-gradient(circle, #ff0000 0%, #ff8800 70%); filter: blur(10px); }
    100% { transform: scale(12); opacity: 0; }
}

.explosion {
    position: absolute;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, #ff0000 0%, #ff4500 100%);
    border-radius: 50%;
    animation: explosion 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    display: none;
    box-shadow: 0 0 50px #ff0000;
    pointer-events: none;
}

.explosion::after {
    content: 'ğŸ’£';
    position: absolute;
    font-size: 40px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) rotate(360deg);
    animation: bombSpin 0.5s linear infinite;
}

@keyframes bombSpin {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
}

.hud {
    display: flex;
    gap: 2rem;
    margin: 1rem 0;
}

.hud-text {
    text-shadow: 0 0 10px var(--neon-blue);
    font-size: 1.2rem;
}

.neon-pulse {
    animation: neonPulse 1.5s infinite;
}
```

1. script.js

```python
const difficulties = {
    easy: { rows: 8, cols: 8, mines: 10 },
    medium: { rows: 12, cols: 12, mines: 20 },
    hard: { rows: 16, cols: 16, mines: 40 }
};

let currentDifficulty = difficulties.easy;
let grid = [];
let mines = new Set();
let revealed = new Set();
let gameOver = false;
let timer = 0;
let timerInterval;

function initGame() {
    clearInterval(timerInterval);
    timer = 0;
    gameOver = false;
    mines.clear();
    revealed.clear();
    document.getElementById('mineCount').textContent = `é›·æ•°: ${currentDifficulty.mines}`;
    document.getElementById('timer').textContent = `æ—¶é—´: ${timer}`;
    
    createGrid();
    placeMines();
    startTimer();
}

function createGrid() {
    const gridElement = document.getElementById('grid');
    gridElement.style.gridTemplateColumns = `repeat(${currentDifficulty.cols}, 30px)`;
    gridElement.innerHTML = '';
    grid = [];

    for (let i = 0; i < currentDifficulty.rows; i++) {
        grid[i] = [];
        for (let j = 0; j < currentDifficulty.cols; j++) {
            const cell = document.createElement('div');
            cell.className = 'grid-cell';
            cell.dataset.row = i;
            cell.dataset.col = j;
            cell.addEventListener('click', handleLeftClick);
            cell.addEventListener('contextmenu', handleRightClick);
            gridElement.appendChild(cell);
            grid[i][j] = cell;
        }
    }
}

function placeMines() {
    mines.clear();
    console.log('å¼€å§‹ç”Ÿæˆåœ°é›·ï¼Œéš¾åº¦:', currentDifficulty);
    
    while (mines.size < currentDifficulty.mines) {
        // ç”Ÿæˆæ­£ç¡®çš„éšæœºèŒƒå›´ï¼ˆåŒ…å«å®Œæ•´çš„è¡Œ/åˆ—ç´¢å¼•ï¼‰
        const row = Math.floor(Math.random() * currentDifficulty.rows);
        const col = Math.floor(Math.random() * currentDifficulty.cols);
        const key = `${row}-${col}`;
        
        if (!mines.has(key)) {
            mines.add(key);
            console.log('ç”Ÿæˆåœ°é›·ä½ç½®:', key);
        }
    }
    console.log('æ€»ç”Ÿæˆåœ°é›·æ•°:', mines.size, 'é¢„æœŸæ•°é‡:', currentDifficulty.mines);
}

function handleLeftClick(e) {
    if (gameOver) return;
    const cell = e.target;
    // ç¡®ä¿åæ ‡è§£ææ­£ç¡®
    const row = Number(cell.dataset.row);
    const col = Number(cell.dataset.col);
    console.assert(Number.isInteger(row) && row >= 0, 'æ— æ•ˆè¡Œå·:', row);
    console.assert(Number.isInteger(col) && col >= 0, 'æ— æ•ˆåˆ—å·:', col);
    
    console.log('ç‚¹å‡»åæ ‡:', {row, col});
    console.log('åœ°é›·ä½ç½®:', [...mines]);

    if (mines.has(`${row}-${col}`)) {
        console.log('è§¦å‘åœ°é›·');
        triggerExplosion(cell);
        gameOver = true;
        revealAllMines();
        return;
    }

    console.log('å®‰å…¨åŒºåŸŸ');
    revealCell(row, col);
}

function handleRightClick(e) {
    e.preventDefault();
    if (gameOver) return;
    const cell = e.target;
    if (!cell.textContent) {
        cell.textContent = 'ğŸš©';
        cell.style.color = '#ff0000';
    } else {
        cell.textContent = '';
    }
}

function revealCell(row, col) {
    if (revealed.has(`${row}-${col}`)) return;
    revealed.add(`${row}-${col}`);

    const count = countAdjacentMines(row, col);
    const cell = grid[row][col];
    cell.classList.add('revealed');

    if (count > 0) {
        cell.textContent = count;
        cell.style.color = getNumberColor(count);
    } else {
        // è‡ªåŠ¨å±•å¼€ç›¸é‚»ç©ºç™½åŒºåŸŸ
        for (let i = -1; i <= 1; i++) {
            for (let j = -1; j <= 1; j++) {
                const newRow = row + i;
                const newCol = col + j;
                if (isValidCell(newRow, newCol)) {
                    revealCell(newRow, newCol);
                }
            }
        }
    }
}

function countAdjacentMines(row, col) {
    let count = 0;
    for (let i = -1; i <= 1; i++) {
        for (let j = -1; j <= 1; j++) {
            if (i === 0 && j === 0) continue;
            if (mines.has(`${row + i}-${col + j}`)) {
                count++;
            }
        }
    }
    return count;
}

function triggerExplosion(cell) {
    const explosion = document.getElementById('explosion');
    // éªŒè¯æœ‰æ•ˆçš„çŸ­è„‰å†²éŸ³æ•ˆï¼ˆ0.3ç§’ï¼‰
    const audio = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAgIA==');
    
    // ç²¾ç¡®è§†å£å®šä½ï¼ˆåŒ…å«æ»šåŠ¨è¡¥å¿ï¼‰
    const grid = document.getElementById('grid');
    const gridRect = grid.getBoundingClientRect();
    const cellSize = 30;
    
    // ç»ˆæå®šä½æ–¹æ¡ˆï¼ˆåŒ…å«è¯¦ç»†æ—¥å¿—å’Œå…¼å®¹æ€§å¤„ç†ï¼‰
    const cellX = cell.dataset.col * cellSize;
    const cellY = cell.dataset.row * cellSize;
    
    console.log('ç½‘æ ¼ä½ç½®:', {left: gridRect.left, top: gridRect.top});
    console.log('å•å…ƒæ ¼åç§»:', {cellX, cellY});
    console.log('çª—å£æ»šåŠ¨:', {scrollX: window.scrollX, scrollY: window.scrollY});
    
    // æœ€ç»ˆå®šä½æ–¹æ¡ˆï¼ˆå¸¦è§†å£è¾¹ç•Œæ£€æŸ¥ï¼‰
    const finalLeft = Math.max(0, gridRect.left + cellX + window.scrollX - 35);
    const finalTop = Math.max(0, gridRect.top + cellY + window.scrollY - 35);
    
    // æ·»åŠ å®¹é”™å¤„ç†
    if (isNaN(finalLeft) || isNaN(finalTop)) {
        console.error('å®šä½è®¡ç®—é”™è¯¯:', {gridRect, cellX, cellY});
        return;
    }
    
    console.log('æœ€ç»ˆçˆ†ç‚¸åæ ‡:', {finalLeft, finalTop});
    
    explosion.style.left = `${left}px`;
    explosion.style.top = `${top}px`;
    
    // å¤„ç†éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾é™åˆ¶
    audio.play().catch(() => {
        document.addEventListener('click', () => audio.play(), { once: true });
    });

    // æ˜¾ç¤ºçˆ†ç‚¸æ•ˆæœ
    explosion.style.display = 'block';
    
    // è‡ªåŠ¨éšè—
    setTimeout(() => {
        explosion.style.display = 'none';
    }, 800);
}

function revealAllMines() {
    mines.forEach(mine => {
        const [row, col] = mine.split('-');
        grid[row][col].classList.add('mine');
        grid[row][col].textContent = 'ğŸ’£';
    });
}

function startTimer() {
    timerInterval = setInterval(() => {
        timer++;
        document.getElementById('timer').textContent = `æ—¶é—´: ${timer}`;
    }, 1000);
}

function getNumberColor(num) {
    const colors = ['', '#00ffff', '#00ff00', '#ffff00', '#ff8000', '#ff0000'];
    return colors[num] || '#ffffff';
}

function isValidCell(row, col) {
    return row >= 0 && row < currentDifficulty.rows && 
           col >= 0 && col < currentDifficulty.cols;
}

// äº‹ä»¶ç›‘å¬
document.querySelectorAll('.cyber-button[data-difficulty]').forEach(btn => {
    btn.addEventListener('click', () => {
        currentDifficulty = difficulties[btn.dataset.difficulty];
        initGame();
    });
});

document.getElementById('restart').addEventListener('click', initGame);

// åˆå§‹åŒ–æ¸¸æˆ
initGame();
```

### ğŸ”¥ğŸ”¥ğŸ”¥Roo Clineå¯¹è¯è®°å½•

[https://github.com/win4r/mytest/blob/main/cline_task_jan-21-2025_12-12-15-am.md](https://github.com/win4r/mytest/blob/main/cline_task_jan-21-2025_12-12-15-am.md)
